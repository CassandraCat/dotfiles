"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2101],{21511:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(30758),a=r(41978),n=r(48388),l=r(53245),o=r(29640),s=r(29670),c=r(20136),d=r(86070);const u=i.memo((function({uri:e,divider:t,removeLabel:r}){const u=(0,a.wA)(),p=!(0,s.n)(),g=(0,c.f)(),m=(0,i.useCallback)((async()=>{u((0,l.aw)(e,!0))}),[u,e]);return(0,d.jsx)(o.D,{role:"menuitem",divider:t,disabled:p&&!g?.getCapabilities().canModifyOffline,onClick:m,leadingIcon:(0,d.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))},63244:(e,t,r)=>{r.d(t,{P:()=>x});var i=r(30758),a=r(83042),n=r(47130),l=r(69401),o=r(75048),s=r(77769),c=r(67921),d=r(21511),u=r(60088),p=r(20137),g=r(34302),m=r(38611),y=r(86070);const x=i.memo((function({uri:e,artistUri:t,canPin:r=p.oT.NO,isPinned:i=!1,canRemove:x=!1}){const{spec:b}=(0,g.o)(e);return(0,y.jsx)(u.pZ,{value:"album",children:(0,y.jsxs)(n.W,{children:[x&&(0,y.jsx)(d.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),t&&(0,y.jsx)(o.z,{spec:b,divider:"after",uri:t,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),r!==p.oT.NO&&(0,y.jsx)(c.k,{uri:e,canPin:r,isPinned:i,type:m.c.PRE_RELEASE_ALBUM,spec:b}),(0,y.jsx)(l.m,{uri:e,spec:b,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,y.jsx)(s.q,{spec:b,divider:"before",uri:e})]})})}))},45109:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(26016);const a="k270skPbT7JOaSidSA2a";var n=r(86070);const l=({iconSize:e=64,...t})=>(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},35665:(e,t,r)=>{r.d(t,{X:()=>u,A:()=>H});var i=r(30758),a=r(84567),n=r(29985),l=r(83042),o=r(22724),s=r(77925);const c="KsnGjjEeMb2miriJrkjW";var d=r(86070);const u=()=>{const e=l.Ru.getLocaleForTranslation(),t=s.IB[e]??s.IB.en,r=(0,o.ZZ)(),u=(0,i.useCallback)((()=>{r({type:"OPEN"})}),[r]);return(0,d.jsx)("div",{className:c,children:(0,d.jsx)(a.n,{iconLeading:n.d,size:"small",onClick:u,"data-testid":"language-selection-button",children:t.displayName})})};var p=r(8143),g=r(41978),m=r(80741),y=r(25734),x=r(57865),b=r(930),h=r(30734),f=r(38611),S=r(80123),v=r(81288);const w="ZpqHX3kvsJIsR1QIc4kf",C=({children:e,locale:t,onClick:r,type:i="button"})=>{const a=t===h.Xn,n=(0,v.vf)(window.location.pathname),o=(0,x.o_)(window.location.pathname),s=(0,b.W)({type:"route",uri:n?f.c.HOME:o?.toURI()}),c={className:w,id:t,onClick:e=>(e=>{if("button"===i){e.preventDefault();const t=new URL(window.location.href);window.location.href.includes("locale")&&t.searchParams.delete("locale"),window.location.href=t.href}r(t)})(e),"data-testid":`language-option-${t}`};if("link"===i){const r=(0,S.ll)(window.location.pathname,!a),i=(0,S.hF)(r,(0,l.a7)(t).baseName),n=s?i:window.location.pathname,o=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${window.location.origin}${n}`);return(0,d.jsx)("a",{href:o,...c,children:e})}return(0,d.jsx)("button",{...c,children:e})},I="eYLSfS4EKfwsdTsItWkY",R=({style:e,children:t})=>(0,d.jsx)("div",{className:I,style:e,children:t});var P=r(97500),T=r.n(P);const j="KPuW9eE4auKgVgMtPZoH",A="zCedVxWmwaJhPIGzJixP",D="qzuG9AHNXHQrOGF06r9A",L="ZgjCz5A7qOyprtvcLK8y",E="BSwvSvqHiQUVuim4Eidv",O="TpluDuF12UKv3IIq_VDu",k=({onClose:e,children:t})=>{const r=(0,i.useRef)(null),{isOpen:a}=(0,o.iL)();return(0,d.jsx)("div",{"data-testid":"language-selection-modal",className:T()(j,{[A]:a}),onClick:t=>{t.target===r.current&&e()},role:"presentation",ref:r,children:t})},N=({ariaDescribedBy:e,ariaLabelledBy:t,children:r})=>{const{isOpen:i}=(0,o.iL)();return(0,d.jsx)("div",{className:D,role:"dialog",hidden:!i,"aria-modal":!0,"aria-labelledby":t,"aria-describedby":e,children:r})};var F=r(56672);const B=({onClose:e})=>(0,d.jsx)("button",{"data-testid":"close-button",className:O,onClick:()=>{e()},children:(0,d.jsx)(F.M,{size:"small","aria-label":l.Ru.get("close")})});var M=r(13556),U=r(93389),V=r(57770),_=r(20063);const H=({languageSelectionModalRef:e})=>{const t=(0,i.useRef)(null),[r,a]=(0,i.useState)("0"),n=(0,o.ZZ)(),c=(0,g.d4)(M.MU),u=(0,i.useCallback)((()=>{n({type:"CLOSE"})}),[n]),{isOpen:x}=(0,o.iL)(),b=(0,i.useCallback)((()=>{a(`${t.current?.getBoundingClientRect().height}px`)}),[a]),h=e=>{var t;(0,_.n0)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),u()};var f;if(f=u,(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&f()};return window.addEventListener("keyup",e,!1),()=>window.removeEventListener("keyup",e)})),(0,V.w)({refOrElement:t,observeOnly:"height",onResize:b}),(0,i.useEffect)((()=>{b()}),[b]),!e.current)return null;const S="language-selection-title",w="language-selection-subtitle",I={"--header-height":r};return(0,p.createPortal)((0,d.jsx)(U.s,{active:x,children:(0,d.jsx)("div",{children:(0,d.jsx)(k,{onClose:u,children:(0,d.jsxs)(N,{ariaLabelledBy:S,ariaDescribedBy:w,children:[(0,d.jsxs)("div",{className:L,ref:t,children:[(0,d.jsxs)("div",{className:E,children:[(0,d.jsx)(m.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",id:S,paddingBottom:y.v4,children:l.Ru.get("i18n.language-selection.title")}),(0,d.jsx)(m.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",id:w,paddingBottom:y.CD,children:l.Ru.get("i18n.language-selection.subtitle")})]}),(0,d.jsx)(B,{onClose:u})]}),(0,d.jsx)(R,{style:{...I},children:s.Np.map((e=>{const t=(0,l.a7)(e).baseName,r=(0,v.p)({localeFeatureFlag:c,urlLocale:t,type:"locale"});return(0,d.jsxs)(C,{onClick:h,locale:e,type:r?"link":"button",children:[(0,d.jsx)(m.E,{semanticColor:"textBase",children:s.IB[e].displayName}),(0,d.jsx)(m.E,{children:s.IB[e].displayNameEn})]},e)}))})]})})})}),e.current)}},42101:(e,t,r)=>{r.d(t,{A:()=>Bl,YourLibraryX:()=>as,q:()=>Ml});var i=r(30758),a=r(97500),n=r.n(a),l=r(96131),o=r(41978),s=r(8159),c=r(88308),d=r(67673),u=r(22839),p=r(92931),g=r(48126),m=r(47130),y=r(62975),x=r(23852),b=r(83042),h=r(29640),f=r(28512),S=r(50725),v=r(60088),w=r(10505),C=r(86070);const I=({position:e,divider:t,onCreateCallback:r=(()=>{}),spec:a})=>{const n=(0,f.W)(),{createPlaylist:l}=(0,S.A)(),o=(0,w.s)(),s=(0,i.useCallback)((()=>{n({intent:"create-playlist",type:"click"});const t=a.createButtonFactory().hitCreatePlaylist();t&&o.logInteraction(t),l(b.Ru.get("playlist.default_playlist_name"),e),r()}),[n,a,o,l,e,r]);return(0,C.jsx)(h.D,{role:"menuitem",divider:t,onClick:s,leadingIcon:(0,C.jsx)(x.u,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.create-playlist")})},R=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"create-playlist",children:(0,C.jsx)(I,{...e})})}));var P=r(20137),T=r(34302);const j=i.memo((function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,T.o)(e??P.gv);return(0,C.jsx)(v.pZ,{value:"folder",children:(0,C.jsxs)(m.W,{children:[(0,C.jsx)(R,{position:r,onCreateCallback:t,spec:i}),(0,C.jsx)(y.j,{position:r,onCreateCallback:t,spec:i})]})})}));var A=r(71459),D=r(55695),L=r(83091),E=r(20551),O=r(24207),k=r(56599),N=r(97265),F=r(73873),B=r(56201),M=r(48267),U=r(49371),V=r(3688),_=r(22980),H=r(49284),W=r(38640),z=r(58221),X=r(25182);const K=1248,Y=800,G=(0,X.g)(_.Z),Z=(0,X.g)(H.fX),J=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,ylxCollapsedStateNavbarWidth:n,ylxDefaultStateNavbarWidth:o,ylxExpandedStateNavbarWidth:s}=(0,M.y)(),{ylxSidebarState:c,setYlxSidebarState:d,canCollapse:u}=(0,H.$)(),p=(0,U.XB)(),g=(0,U._Y)(),{min:m,max:y,size:x,setSize:b}=(0,U.Zf)(),h=(0,W.H)(),f=(0,i.useRef)(null),S=(0,i.useRef)(null),v=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{const i=h-e-3*F.KV-(p!==_.Z.Disabled?x+F.KV:0),w={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,ylxSidebarState:c,ylxSidebarStateRestoreTarget:f.current,rightSidebarWidth:x,rightSidebarMinWidth:m,rightSidebarMaxWidth:y,rightSidebarPanel:p,rightSidebarPanelRestoreTarget:S.current,storedCollapsedYLXWidth:n,storedDefaultYLXWidth:o,storedExpandedYLXWidth:s,clientWidth:h,mainContentWidth:i,canCollapse:u},C=v.current;if((0,l.j)(w,C))return;const I=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,ylxSidebarState:o,ylxSidebarStateRestoreTarget:s,rightSidebarMinWidth:c=0,rightSidebarMaxWidth:d=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:m=0,storedExpandedYLXWidth:y=0,clientWidth:x=0,canCollapse:b=!0}=t,h={},f=u!==_.Z.Disabled,S=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,v=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,w=void 0===e.clientWidth?0:x-e.clientWidth,C=w<0,I=x>0,R=a<F.ev?F.ev-a:0;let P=C?-1*w:0;a>K?P=Math.max(0,P-(a-K)):R&&(P=R);const T=o===H.fX.EXPANDED&&e.ylxSidebarState!==H.fX.EXPANDED,j=o===H.fX.DEFAULT&&e.ylxSidebarState!==H.fX.DEFAULT;let A=r-n;S&&(A=T?r-B.ZU.EXPANDED_MIN:j?r-B.ZU.DEFAULT_MIN:0);let D=v?0:i-c;const L=P<=A+D;if(a<F.ev&&!L)f&&(S||C&&(o===H.fX.COLLAPSED||!b))?(h.rightSidebarPanel=_.Z.Disabled,h.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,P-=i,D=0):(o===H.fX.EXPANDED&&a+(r-B.ZU.DEFAULT_MIN)>F.ev?(h.ylxSidebarState=H.fX.DEFAULT,P-=r-m,A=m-B.ZU.DEFAULT_MIN):(h.ylxSidebarState=H.fX.COLLAPSED,P-=r-g,A=0),h.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===_.Z.Disabled&&p!==_.Z.Disabled&&G(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-F.KV>=F.ev)h.rightSidebarPanel=p,h.rightSidebarPanelRestoreTarget=null;else if(o===H.fX.DEFAULT&&s===H.fX.EXPANDED&&a-(y-r)>=F.ev)h.ylxSidebarState=H.fX.EXPANDED,h.ylxSidebarStateRestoreTarget=null;else if(o===H.fX.COLLAPSED&&s===H.fX.DEFAULT&&a-(m-r)>=F.ev)h.ylxSidebarState=H.fX.DEFAULT,h.ylxSidebarStateRestoreTarget=null;else if(I&&a>=Y){let e=l-r,t=d-i;const a=Math.min(w,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<d&&t>0&&(i++,t--)}o!==e.ylxSidebarState&&Z(s)&&s===e.ylxSidebarStateRestoreTarget&&(h.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&G(p)&&p===e.rightSidebarPanelRestoreTarget&&(h.rightSidebarPanelRestoreTarget=null);if(P>0&&P<=A+D)for(let e=0;e<P;e++)r>i&&r>n&&A>0?(r--,A--):i>c&&D>0&&(i--,D--);r&&r!==t.leftSidebarWidth&&(h.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(h.rightSidebarWidth=i);return h}(C,w);void 0!==I.leftSidebarWidth&&t(I.leftSidebarWidth),Z(I.ylxSidebarState)&&d(I.ylxSidebarState),void 0!==I.ylxSidebarStateRestoreTarget&&(f.current=I.ylxSidebarStateRestoreTarget),void 0!==I.rightSidebarWidth&&0!==C?.rightSidebarWidth&&b(I.rightSidebarWidth),void 0!==I.rightSidebarPanel&&g((0,V.MQ)(I.rightSidebarPanel)),void 0!==I.rightSidebarPanelRestoreTarget&&(S.current=I.rightSidebarPanelRestoreTarget),v.current=w}),[e,r,a,t,c,x,m,y,b,p,n,o,s,d,g,h,u])}(),null),q=()=>(0,d.NC)(z.Wfl,{loadingValue:!1})?(0,C.jsx)(J,{}):null;var Q=r(33803);let $=function(e){return e.YLX_SORT_AND_VIEW_PICKER="ylx-sort-and-view-picker",e.YLX_CUSTOM_ORDERING="ylx-custom-ordering",e.REFINERS_PICKER="refiners-picker",e}({}),ee=function(e){return e.URGENT="urgent",e.CONTEXTUAL="contextual",e.DEFAULT="default",e}({});class te{itemsRecord={[ee.URGENT]:new Set,[ee.CONTEXTUAL]:new Set,[ee.DEFAULT]:new Set};visibleItem=null;static PRIORITIES=[ee.URGENT,ee.CONTEXTUAL,ee.DEFAULT];static NO_CHANGE={keyToShow:null,keyToHide:null};getNextItem(){let e=null;return te.PRIORITIES.some((t=>{const r=this.itemsRecord[t];return e=Array.from(r).at(-1)??null,e})),e}updateVisibility(e,t,r){const i=this.visibleItem;"add"===r?this.itemsRecord[t].add(e):this.itemsRecord[t].delete(e);const a=this.getNextItem();return this.visibleItem=a,i===a?te.NO_CHANGE:{keyToShow:a,keyToHide:i}}}var re=r(32523);let ie=function(e){return e.VISIBILITY_GRANTED="visibilityGranted",e.VISIBILITY_DENIED="visibilityDenied",e}({});class ae extends re.V{}const ne=(0,i.createContext)({notifyShowInterest:()=>{throw new Error("notifyShowInterest must be used within a VisibilityOrchestratorProvider")},notifyHideInterest:()=>{throw new Error("notifyHideInterest must be used within a VisibilityOrchestratorProvider")},events:new ae}),le=({children:e})=>{const t=(0,i.useMemo)((()=>new te),[]),r=(0,i.useRef)(new ae),a=(0,i.useCallback)(((e,t)=>{t&&r.current.emitSync(ie.VISIBILITY_DENIED,{key:t}),e&&r.current.emitSync(ie.VISIBILITY_GRANTED,{key:e})}),[]),n=(0,i.useCallback)(((e,r=ee.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"add");a(i,n)}),[t,a]),l=(0,i.useCallback)(((e,r=ee.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"remove");a(i,n)}),[t,a]);return(0,C.jsx)(ne.Provider,{value:{events:r.current,notifyShowInterest:n,notifyHideInterest:l},children:e})};r(35041),r(6046);re.V;r(90038);class oe{events=new re.V;addRefiners(){throw new Error("Method not implemented.")}removeRefiners(){throw new Error("Method not implemented.")}getEvents(){return this.events}updateSelectedRefinersOrder(e){throw new Error("Method not implemented.")}}const se=(0,i.createContext)(null);r(26051);var ce=r(68304),de=(r(48606),r(35032));r(76538);const ue=function({children:e}){const t=(0,i.useMemo)((()=>new oe),[]);return(0,C.jsx)(se.Provider,{value:t,children:e})},pe=()=>null,ge=()=>null,me=()=>null,ye=()=>null,xe=()=>null;const be={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},he=(0,i.createContext)(be);class fe{focusElement=()=>{};getFocusElement=()=>null;registerFocusElement=()=>()=>{}}const Se=({children:e})=>{const t=(0,i.useMemo)((()=>new fe),[]);return(0,C.jsx)(he.Provider,{value:t,children:e})};var ve=r(4237);const we=()=>({cheetaraOnboardingIsActive:!1,setCheetaraOnboardingIsActive:()=>{},cheetaraOnboardingDismissed:!1,setCheetaraOnboardingDismissed:()=>{},handleCloseCheetaraOnboarding:()=>{},cheetaraTooltipVisible:!1,setCheetaraTooltipVisible:()=>{}});r(71332);const Ce=()=>!1;var Ie=r(35665),Re=r(80741),Pe=r(13921),Te=r(79596),je=r(28671),Ae=r(16349);const De="rqGyIqd3Igk05BEB2ZC6",Le="WycFx_Gl2tUXbUJpZiD8",Ee=()=>{const[e,t]=(0,i.useState)(!1),r=(0,Te.V)(),a=(0,o.d4)(je.JJ);(0,i.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[]);const n=(0,o.d4)(je.mo);return r&&e?(0,C.jsx)(Pe.t5,{language:b.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,C.jsxs)("div",{className:De,"data-testid":"left-sidebar-legal-links",children:[(0,C.jsx)(Pe.JM,{}),(0,C.jsx)("a",{draggable:!1,href:Ae.Bl,target:"_blank",rel:"noopener",className:Le,children:(0,C.jsx)(Re.E,{variant:"marginal",children:b.Ru.get("cookies")})}),n&&(0,C.jsx)("a",{draggable:!1,href:Ae.Vd,target:"_blank",rel:"noopener",className:Le,children:(0,C.jsx)(Re.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null},Oe="YNnobzGm5w3XKBniKdW9",ke=(0,i.memo)((function({isAnonymous:e}){return(0,C.jsx)("div",{className:Oe,"data-testid":"left-sidebar-footer",children:e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ee,{}),(0,C.jsx)(Ie.X,{})]})})}));var Ne=r(81581),Fe=r(3225),Be=r(27719),Me=r(2576),Ue=r(98377),Ve=r(78311),_e=r(9525);const He="lvJXjYO7YXxGKHcgx5pe",We="yYGZUqSKJttCw_Z2JvPL",ze="wkyebhrfwyJPCfDhQgbp",Xe=()=>{const e=(0,Ue.sy)(),t=(0,w.s)(),r=(0,o.wA)(),{spec:a}=(0,_e.r)(Be.V,{}),n=b.Ru.get("web-player.your-library-x.dsa-message",b.Ru.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{r(Ve.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())}),[r,t,a]);return(0,C.jsx)("div",{className:He,children:e?(0,C.jsx)(Me.Zp,{label:(0,C.jsx)(Re.E,{children:n}),placement:"right",showDelay:0,children:(0,C.jsx)("div",{className:We,children:(0,C.jsx)(Ne.p,{"aria-label":n})})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(Ne.p,{size:"small"})}),(0,C.jsx)(Re.E,{as:"p",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.dsa-message",(0,C.jsx)(Fe.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:l,className:ze,children:(0,C.jsx)(Re.E,{variant:"bodyMedium",children:b.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})},Ke="AhNLpx0iVnlj4SuL_Gaw",Ye="JyZRugeRBHbUtS5ABOQ8",Ge=({className:e})=>(0,C.jsx)("section",{className:n()(Ke,e),children:(0,C.jsxs)("div",{className:Ye,children:[(0,C.jsx)(Re.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,C.jsx)(Re.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var Ze=r(32077),Je=r(47394);const qe={getTitle:()=>b.Ru.get("action-trigger.create-playlist"),getDescription:()=>b.Ru.get("action-trigger.login-playlist")},Qe=({children:e,renderInline:t})=>(0,C.jsx)(Ze.y,{id:Je.x9,options:{...qe,renderInline:t},children:e});var $e=r(23920),et=r(88450);const tt="CfruGiDGW_FH4l65GMpb",rt="fIgbQ9qpINdyy__tkaHi",it="wv308QWnPnkI8n0GdqYO",at=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:o}=e;return(0,C.jsxs)("section",{className:n()(tt,o),children:[(0,C.jsxs)("div",{className:rt,children:[(0,C.jsx)(Re.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,C.jsx)(Re.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,C.jsx)("div",{className:it,children:i&&(a||l)&&(0,C.jsx)($e.$,{className:it,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:et.v,size:"small",children:i})})]})})),nt=({className:e})=>{const{createPlaylist:t}=(0,S.A)(),r=(0,i.useCallback)((()=>{t()}),[t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Qe,{renderInline:!1,children:(0,C.jsx)(at,{onClick:r,linkTitle:b.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:b.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:b.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,C.jsx)(at,{linkTo:"/genre/podcasts-web",linkTitle:b.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:b.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:b.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},lt="NOXrKH_1anB9lsOlyv5g",ot="FIARvjbv_YZKwz7yxNHw",st="Fqrv8StT3DnEAfntIKCg",ct="JydI9ZzWnssPC899sOGP",dt=({query:e,className:t})=>(0,C.jsxs)("div",{className:n()(lt,t),"data-testid":"no-search-results-view",children:[(0,C.jsx)(Re.E,{as:"h1",variant:"bodyMediumBold",className:ot,children:b.Ru.get("web-player.your-library-x.empty-results-title-short",(0,C.jsx)("span",{className:st,children:(0,C.jsx)("span",{className:ct,children:e})}))}),(0,C.jsx)(Re.E,{as:"h2",variant:"bodySmall",children:b.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var ut=r(72787);const pt="vhOeYrTmSoea5vemsMpv",gt="pCKhe1uJhYBUC4YVmz9B",mt=({onClick:e})=>(0,C.jsxs)("div",{className:pt,children:[(0,C.jsx)("div",{className:"icon",children:(0,C.jsx)(ut.b,{size:"xlarge",semanticColor:"textBase"})}),(0,C.jsxs)("div",{className:gt,children:[(0,C.jsx)(Re.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-title")}),(0,C.jsx)(Re.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-body")})]}),(0,C.jsx)("div",{children:(0,C.jsx)($e.$,{onClick:e,colorSet:"invertedLight",size:"small",children:b.Ru.get("web-player.your-library-x.error-button")})})]}),yt=(0,i.createContext)(null);const xt=({children:e})=>{const t=function(){const[e,t]=(0,ve.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,C.jsx)(yt.Provider,{value:t,children:e})},bt="fYWNdY4zhj4OX_T2Xtg6",ht="BRX6aJUAuAsvHKD_fpbo",ft="ZZsPF3Sn4h7m0_5Clhk0",St="IZq_xBKdh88HLD4QY90X",vt="PUipCs3_0Qott0Sru3pB",wt="XAOxFVWnd185_vZ5zPGu",Ct="YsCa3XbOXEm79LH0B7do",It="eC25_w41L83mXDCqdm_A",Rt="VyDwqqtx0153zD8a3TED",Pt="rOgsguaurlHVlgCTY0P7",Tt="zS8ATyQNwnAiEoPrCcIo",jt="Zwr4MoUVImDin82vBn4y",At="lb8li6m8Zei4tr0zNKxX",Dt="aK6vld0FgHGxjz6IiHyS",Lt="Xw1OibA6EkrU4F47EMw9",Et="_EFIA9HjgZxxgTSZzQcg",Ot="JUPaw8kZF94Coth4G88s",kt="main-yourLibraryX-listItem",Nt="c1PJ2LHU0EnzyA0jDc1j",Ft=({isScrolled:e})=>(0,C.jsxs)("div",{className:n()(jt,Dt,{[Lt]:e}),children:[(0,C.jsx)(Re.E,{variant:"marginalBold",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.expanded-list-header.title")}),(0,C.jsx)(Re.E,{variant:"marginalBold",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,C.jsx)(Re.E,{variant:"marginalBold",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})]});var Bt=r(39101);const Mt=()=>null,Ut=()=>null;const Vt=()=>({getFocusElement:null,registerFocusElement:null});var _t=r(25463),Ht=r(20136);const Wt="a2XwshgvydvJO9If_GzQ",zt="aVLBGREPTnbTFhkSdUMV",Xt="ViXEX4SVVU_NA7zcS9kd",Kt="pQvrkwXAqZnbSqJiiQuo",Yt="mA1QNQx6oUXgQ8kMID2S",Gt={marginBlockEnd:0,willChange:"transform, opacity"},Zt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:o=D.Vp,className:s,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,w.s)(),m=(0,Ht.f)(),y=p.selected,x=e?m.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||y&&t?(a(),y&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),y?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,y,t,a,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:f,dropPosition:S,...v}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:o},onLongDragOver:b});return(0,C.jsx)(_t.v,{...p,"aria-label":p["aria-label"],...v,...S===D.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(s,f,{[zt]:S===D.Nz.ON,[Yt]:r}),onClick:h,selectedColorSet:S===D.Nz.ON?"invertedDark":"invertedLight",secondary:y&&!t,style:Gt,ref:c,tabIndex:-1})};var Jt=r(64676);const qt={marginBlockEnd:0,willChange:"transform, opacity"},Qt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:o=D.Vp,className:s,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,w.s)(),m=(0,Ht.f)(),y=p.selected,x=e?m.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||y&&t?(a(),y&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),y?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,y,t,a,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:f,dropPosition:S,...v}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:o},onLongDragOver:b});return(0,C.jsx)(Jt.m,{...p,"aria-label":p["aria-label"],...v,...S===D.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(s,f,{[zt]:S===D.Nz.ON,[Yt]:r}),onClick:h,style:qt,ref:c,tabIndex:-1})},$t=[A.fl.TRACKS,A.fl.LOCAL_TRACKS,A.fl.ALBUMS,A.fl.ARTISTS,A.fl.PLAYLISTS_V2,A.fl.SHOWS,A.fl.AUDIOBOOKS,A.fl.EPISODES,A.fl.FOLDERS],er=[A.fl.TRACKS,A.fl.LOCAL_TRACKS,A.fl.ALBUMS,A.fl.EPISODES,A.fl.PLAYLISTS_V2,A.fl.FOLDERS],tr=[A.fl.TRACKS,A.fl.LOCAL_TRACKS,A.fl.ALBUMS,A.fl.EPISODES,A.fl.PLAYLISTS_V2,A.fl.FOLDERS];r(72826);const rr=()=>[];function ir(e){return{type:"contentType",id:e.id,name:e.name}}function ar(e){return e.id.startsWith("spotify:concept:")?{type:"tag",id:(t={tagUri:e.id,tagName:e.name,entityCount:0}).tagUri,name:t.tagName,count:t.entityCount}:ir(e);var t}var nr=r(941);const lr=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:a,className:n,spec:l,inFolderView:o}){const s=!(t||e),{availableRefiners:c,activeRefiners:d,allContentTypeRefiners:u}=(({availableFilters:e,activeFilters:t,inFolderView:r})=>{const i=e?.map(ir),a=t?.map(ar)??[],n=rr(),l=Ce();return{availableRefiners:t?.length||!l||r?i:n,activeRefiners:a,allContentTypeRefiners:i}})({availableFilters:e,activeFilters:t,inFolderView:o}),{registerFocusElement:p}=Vt(),m=s?u:[...d??[],...c??[]],y=(0,i.useRef)(null),x=(0,i.useCallback)((()=>{(0,nr.MS)(y.current,y.current?.nextElementSibling instanceof HTMLElement?y.current?.nextElementSibling:null),a()}),[a]),h=Ce();return m&&0!==m?.length?(0,C.jsxs)(Bt.F,{className:n,ariaLabel:b.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,C.jsx)(Qt,{resetFilterIds:x,toggleFilterId:r,allowedDropTargetMimeTypes:$t,"aria-label":b.Ru.get("web-player.your-library-x.clear_filters"),innerRef:y,spec:l}),m.map(((e,t)=>{const n=d?.includes(e),o=0===t,c=t>0&&d?.includes(m[0]),u=(0,C.jsx)(Zt,{innerRef:void 0,filterId:e.id,isPrimaryFilter:o,isPlaceholder:s,resetFilterIds:a,toggleFilterId:r,selected:n,spec:l,index:t,children:e.name},e.id);return!h||c?u:(0,C.jsx)(g.h,{menu:(0,C.jsx)(i.Suspense,{fallback:!0,children:(0,C.jsx)(Ut,{refiner:e,resetFilterIds:a,isSelected:n})}),children:u},e.id)})),h&&!d?.length&&!o&&(0,C.jsx)(Mt,{})]}):null})),or="",sr=(0,i.createContext)({openedFolderUri:or,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),cr=({children:e})=>{const{setFilter:t}=(0,i.useContext)(Q.g),[r,a]=(0,ve.x)("opened-folder-uri",or),n=(0,i.useRef)([r??or]),l=(0,i.useRef)("PUSH"),o=(0,i.useCallback)((e=>{a(e),t(or)}),[a,t]),s=(0,i.useCallback)((e=>{n.current.push(e),l.current="PUSH",o(n.current.at(-1))}),[o]),c=(0,i.useCallback)((()=>{n.current.pop();const e=n.current.at(-1);return l.current="POP",o(e),e}),[o]),d=(0,i.useCallback)((()=>{n.current=[or],o(or)}),[o]);return(0,C.jsx)(sr.Provider,{value:{openedFolderUri:r,pushFolder:s,popFolder:c,resetFolder:d,change:l.current},children:e})};var dr=r(6135),ur=r(2554),pr=r(53245),gr=r(44796),mr=r(34459),yr=r(80223),xr=r(79677),br=r(25734),hr=r(57865),fr=r(24448),Sr=r(10064),vr=r(33436),wr=r(45014);const Cr=({iconSize:e="small"})=>(0,C.jsx)("span",{className:vt,children:(0,C.jsx)(wr.C,{size:e,semanticColor:"textBrightAccent",className:St})}),Ir=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>(0,C.jsx)(Me.Zp,{label:(0,C.jsxs)("div",{className:Tt,children:[(0,C.jsxs)("div",{children:[t,r]}),i&&(0,C.jsx)(Cr,{})]}),placement:"right",showDelay:0,children:e}),Rr=e=>{const t=(0,i.useRef)(null);return(0,ur.c0)(e.uri)?(0,C.jsx)(vr.cW,{parentRef:e.parentRef,api:t,children:(0,C.jsx)(Ir,{...e})}):(0,C.jsx)(Ir,{...e})};var Pr=r(88406),Tr=r(60086),jr=r(64439);const Ar=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,C.jsx)("div",{className:jr.A.subtitle,children:(0,C.jsxs)(Pr.j,{className:jr.A.link,id:i,dir:"auto",children:[(0,C.jsx)("span",{className:jr.A.subtitleLeadingWrapper,children:e}),(0,C.jsx)("span",{className:jr.A.subtitleText,children:t})]})})},Dr=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,C.jsx)("div",{className:jr.A.subtitle,children:(0,C.jsxs)(Tr.j,{lineClamp:1,className:jr.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,C.jsx)("span",{className:jr.A.subtitleLeadingWrapper,children:e}),t]})})};var Lr=r(67803),Er=r(49730),Or=r(46658),kr=r(930),Nr=r(63695);const Fr=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function Br(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,o=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),s=e.isComposing||229===e.keyCode,c=(d=e.key,Fr.has(d)&&!t);var d;const u=r&&!n.current,p=t&&!n.current;if(i||o||s||c||u||p)return;(t&&n.current||r)&&(e.preventDefault(),e.stopPropagation()),a((r=>t?r.slice(0,-1):r+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const Mr=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),Ur=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:a=!0})=>{const[n,l]=(0,i.useState)({uid:null,str:""}),o=(0,i.useMemo)((()=>({typeaheadResult:n,setTypeaheadResult:l})),[n,l]),s=Br(t,a),c=(0,i.useRef)(s);c.current=s;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)((()=>{s&&a?d.current(s).then((e=>{s===c.current&&l({uid:e,str:s})})):l({uid:null,str:""})}),[a,s,l]),(0,C.jsx)(Mr.Provider,{value:o,children:e})};var Vr=r(80123);const _r={state:{referrer:"your_library",preventMoveFocus:!0}};function Hr(e,t,r,a){const{filter:n}=(0,i.useContext)(Q.g),{isActive:l}=(0,Nr.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(Mr);return t===e?r:null}(e),s=!!o,c=(0,kr.W)({uri:e,type:"link"})?(0,Vr.hF)(t):t,d=(0,i.useRef)(null),u=(0,Lr.Zp)(),p=(0,i.useCallback)((e=>{e.preventDefault(),a?a():c&&u(c,_r)}),[a,u,c]);(0,i.useLayoutEffect)((()=>{s&&d.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})}),[s]);return{isActive:l,onClick:p,contents:n||o?(0,C.jsx)("span",{ref:d,children:(0,C.jsx)(yr.M,{autoEscape:!0,searchWords:[n.trim(),...o?.split(" ")??""],textToHighlight:r})}):r}}const Wr=({uri:e,playbackUri:t=e,title:r,menu:i,to:a=(0,hr.o_)(e)?.toURLPath(!0)||"",handleNavigate:l})=>{const{isActive:o,contents:s}=Hr(t,a,r,l),c=`listrow-title-${e}`;return(0,C.jsx)(g.h,{menu:i,children:(0,C.jsx)(Er.d,{id:c,lineClamp:1,className:n()(jr.A.link,jr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:s})})},zr=({uri:e,playbackUri:t=e,title:r,menu:i,to:a=(0,hr.o_)(e)?.toURLPath(!0)||"",handleNavigate:l})=>{const{isActive:o,onClick:s,contents:c}=Hr(t,a,r,l);return(0,C.jsx)(g.h,{menu:i,children:(0,C.jsx)(Or.Z,{lineClamp:1,className:n()(jr.A.link,jr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:a,onClick:s,role:"gridcell",dir:"auto",children:c})})},Xr=[A.fl.ALBUMS,A.fl.ARTISTS,A.fl.PLAYLISTS_V2,A.fl.SHOWS,A.fl.FOLDERS,A.fl.PSEUDO_PLAYLISTS],Kr=[A.fl.PLAYLISTS_V2,A.fl.FOLDERS];var Yr=r(54629);const Gr=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,C.jsx)(Yr.T,{"aria-label":i,titleText:i,descriptionText:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};var Zr=r(84081);function Jr({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const a=(0,Ht.f)(),{contains:n}=(0,Zr.p)("ylpin"),[l,o]=(0,i.useState)(null),s=(0,i.useCallback)((async(t,i)=>{if(r)return void e(t,i);const{[A.fl.PLAYLISTS_V2]:a=[],[A.fl.FOLDERS]:l=[]}=t,s=[...a,...l];if(!!s.length&&(await n(...s)).some(Boolean)){if(s.length>1)throw new Error("Reordering multiple pinned items at once is not supported");o({dropData:t,dropPosition:i})}else e(t,i)}),[r,n,e]),c=(0,w.s)();return{applyDropWithUnpinConfirmation:s,unpinConfirmationDialog:l?(0,C.jsx)(Gr,{isConfirmationForPlaylist:!l.dropData[A.fl.FOLDERS]?.length,onClose:()=>o(null),onConfirm:async()=>{const{[A.fl.PLAYLISTS_V2]:r=[],[A.fl.FOLDERS]:i=[]}=l.dropData;await a.unpin([...r,...i][0]),t?.dragUnpinItem&&c.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(l.dropData,l.dropPosition),o(null)}}):null}}function qr(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(k.O_);return{dropOriginIsYLX:e===P.gv,entityIsInFolder:t>0}}var Qr=r(9058);function $r(){const e=(0,Qr.g)(),{dropOriginIsYLX:t}=qr();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}var ei=r(36093);function ti({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const a=(0,Qr.g)(),n=(0,Ht.f)(),l=(0,w.s)(),o=$r(),s=(0,i.useCallback)((async(i,s)=>{const{[A.fl.PLAYLISTS_V2]:c=[],[A.fl.FOLDERS]:[d]=[]}=i,u=s===D.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,hr.tb)(e)||(0,hr.fp)(e)){const t=ri((await a.getContents()).items,e);-1===t?await a.add([e],{before:"start"}):t>0&&((0,hr.tb)(e)?await a.move({uri:e},{before:"start"}):await a.moveFolder({uri:e},{before:"start"}))}else if(!(0,hr.Z0)(e)){const[t]=await n.contains(e);t||await n.add({uris:[e]})}await n.pin(e,u),l.logInteraction(t.dragPinItem({itemToPin:e}))}else d?await a.moveFolder({uri:d},u):c.length&&await o(c,u);l.logInteraction(t.dragSort())}),[e,r,n,l,t,a,o]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Jr(r?{onApplyDrop:s,spec:t,isDropTargetPinned:r}:{onApplyDrop:s});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[A.fl.PLAYLISTS_V2]:r=[],[A.fl.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t)}),[d]),unpinConfirmationDialog:c}}function ri(e,t,r=0){for(const i of e)if((0,ei.Af)(i)||(0,ei.sA)(i)){if((0,hr.B2)(i.uri,t))return r;if((0,ei.sA)(i)){const e=ri(i.items,t,r+1);if(-1!==e)return e}}return-1}var ii=r(13341);const ai={state:{referrer:"your_library",preventMoveFocus:!0}};function ni({uri:e,to:t=(0,hr.o_)(e)?.toURLPath(!0)||"",type:r,handleNavigate:a,dragLabel:n,isPinned:l,canReorder:o,allowedDropTargetDropOnMimeTypes:s=[],onDropTargetDropOn:c,onLongDragOver:d,openDeleteDialog:u,togglePlay:p,isItemInGrid:g,playInsteadOfNavigating:m=!1,isPlaying:y,isActive:x,spec:b,folderDepth:h}){const f=(0,kr.W)({uri:e,type:"link"})?(0,Vr.hF)(t):t,S=(0,Lr.Zp)(),v=(0,Lr.zy)(),C=(0,i.useCallback)((()=>{S(f,ai)}),[S,f]),I=(0,w.s)(),R=(0,i.useRef)(0),T=(0,i.useRef)(null),j=(0,i.useCallback)((({target:e})=>e instanceof HTMLElement&&!T.current?.contains(e)),[]),E=(0,i.useCallback)((t=>{if(!j(t)){if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),m){if(R.current>Date.now())return;return R.current=Date.now()+300,void(y||(p?.(),I.logInteraction(b.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}a?a():f&&S(f,{...ai,replace:f===v.pathname}),I.logInteraction(b.yourLibraryItemFactory().hitUiNavigate({destination:e}))}}),[j,m,a,f,I,b,e,p,y,S,v.pathname]),O=(0,i.useCallback)((t=>{m||j(t)||p&&(x?y?I.logInteraction(b.yourLibraryItemFactory().doubleHitPause({itemToBePaused:e})):I.logInteraction(b.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:e})):I.logInteraction(b.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),p?.())}),[j,m,p,x,y,I,b,e]),k=(0,i.useCallback)((()=>{I.logInteraction(b.yourLibraryItemFactory().secondaryHitUiReveal())}),[I,b]),{draggable:N,onDragStart:F}=(0,ii.P)({itemUris:[e],itemMimeTypes:[(0,A.j3)(r)],dragLabelText:n,sectionId:h??0,dropOriginUri:P.gv});let B=[];l?B=Xr:o&&(B=Kr);const M={[D.Nz.ON]:s,[D.Nz.BEFORE]:B,[D.Nz.AFTER]:B},{handleDropBeforeOrAfterRootlistItem:U,unpinConfirmationDialog:V}=ti({dropTargetUri:e,spec:b,isDropTargetPinned:l}),_=(0,i.useCallback)(((e,t)=>{t===D.Nz.ON?c?.(e,t):t!==D.Nz.BEFORE&&t!==D.Nz.AFTER||U(e,t)}),[c,U]),{dropPosition:H,className:W,...z}=(0,L.A)({uri:e,allowedMimeTypesByDropPosition:M,onDrop:_,onLongDragOver:d??C,reorderDirection:g?"horizontal":"vertical"}),X=(0,i.useCallback)((t=>{t.repeat||j(t)||("Backspace"!==t.key&&"Delete"!==t.key||!u||u(),"Enter"===t.key&&t.shiftKey&&p&&(t.preventDefault(),p()),"Enter"===t.key&&I.logInteraction(b.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))}),[j,I,u,b,p,e]),K=(0,hr.o_)(v.pathname,{parseUnknown:!0})?.toURI();return{onClick:E,onDoubleClick:O,draggable:N&&!!n,onDragStart:F,onKeyDown:X,unpinConfirmationDialog:V,dropPosition:H,dropTargetClassName:W,logRightClick:k,isViewActive:!!K&&(0,hr.B2)(e,K),itemRef:T,...z}}var li=r(38611),oi=r(98315);const si=e=>{switch(e){case li.c.ALBUM:return b.Ru.get("web-player.your-library-x.type-album");case li.c.ARTIST:return b.Ru.get("web-player.your-library-x.type-artist");case li.c.FOLDER:return b.Ru.get("web-player.your-library-x.type-folder");case li.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.type-audiobook");case li.c.YOUR_EPISODES:case li.c.LOCAL_FILES:case li.c.LIKED_SONGS:case li.c.PLAYLIST:return b.Ru.get("web-player.your-library-x.type-playlist");case li.c.SHOW:return b.Ru.get("web-player.your-library-x.type-show");case li.c.PRE_RELEASE_ALBUM:return b.Ru.get("web-player.your-library-x.type-prerelease-album");case li.c.PRE_RELEASE_BOOK:return b.Ru.get("web-player.your-library-x.type-prerelease-audiobook");default:return(0,oi.d)(e)}},ci=e=>{switch(e){case li.c.YOUR_EPISODES:case li.c.LIKED_SONGS:case li.c.LOCAL_FILES:return li.c.PLAYLIST;default:return e}};var di=r(6143);const ui=i.createContext(!1),pi=({children:e,isCompact:t})=>(0,C.jsx)(ui.Provider,{value:t,children:e}),gi=()=>(0,i.useContext)(ui),mi="wJTUKAyYI219kJtclJLa",yi="q0_cpEyu_8EC7he96qT_",xi="L8ET6xwMh_wMEqCpmunH",bi="D_1eJKOJ3wTCKO93GX06",hi="_7kcfiJ2UNEh3CDR9Wau",fi="N8wAJha8ApfxgOfqv4UM",Si="iJMxV9zMXSfrjJPyB3Fw",vi=({uri:e,to:t=(0,hr.o_)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:a,name:l,subtitle:o,cover:s,type:c,downloadButton:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:m,onLongDragOver:y,menu:x,leading:b,openDeleteDialog:h,togglePlay:f,isPinned:S,shouldShowType:v,playbackUri:w,isPlaying:I,isActive:R,playInsteadOfNavigating:P,spec:T,index:j,animateClassName:A="",animateState:L,preReleaseIcon:E,lockedIcon:O})=>{const{onClick:k,onDoubleClick:N,draggable:F,onDragStart:B,onKeyDown:M,dropPosition:U,dropTargetClassName:V,unpinConfirmationDialog:_,logRightClick:H,isViewActive:W,itemRef:z,...X}=ni({uri:e,to:t,handleNavigate:r,dragLabel:a,isPinned:S,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:m,openDeleteDialog:h,onLongDragOver:y,togglePlay:f,isItemInGrid:!0,isPlaying:I,isActive:R,spec:T,playInsteadOfNavigating:P}),K=(0,C.jsx)(zr,{uri:e,title:l,menu:x,handleNavigate:r,playbackUri:w}),Y=(0,C.jsx)(Dr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(di.g,{pinned:S}),O,E,d]}),subtitle:(0,C.jsxs)(C.Fragment,{children:[v&&si(c),!!o&&v&&" • ",o]}),uri:e}),G=(0,i.useRef)(null),Z=gi();let J=(0,C.jsx)(g.h,{menu:x,onShow:H,children:(0,C.jsx)(Sr.E,{uri:e,trigger:Sr.l.OnMouseDown,children:(0,C.jsx)(xr.Z,{id:e,title:K,subtitle:Y,media:s,size:"sm",leading:b,className:n()(mi,{[A]:L}),variant:W?"tinted":void 0,onClick:k,onDoubleClick:N,padding:br.CJ,...X})})});return Z&&(J=(0,C.jsx)(Rr,{title:K,subtitleSlot:Y,uri:e,isPlaying:I,parentRef:G,children:(0,C.jsx)("div",{children:(0,C.jsx)(g.h,{menu:x,onShow:H,children:(0,C.jsx)(Sr.E,{uri:e,trigger:Sr.l.OnMouseDown,children:(0,C.jsx)(xr.Z,{id:e,title:void 0,media:s,size:"sm",className:n()(mi,yi,{[A]:L}),variant:W?"tinted":void 0,onClick:k,onDoubleClick:N,padding:br.vw,ref:G,...X})})})})})),(0,C.jsxs)(C.Fragment,{children:[_,(0,C.jsx)(fr.W,{draggable:F,onDragStart:B,onKeyDown:M,className:n()(V,{[Wt]:U===D.Nz.ON,[Xt]:U===D.Nz.BEFORE,[Kt]:U===D.Nz.AFTER}),"aria-selected":R,innerRef:z,"aria-posinset":j,children:J})]})};var wi=r(41495),Ci=r(41899);const Ii=({name:e,uri:t,togglePlay:r,spec:a,isActive:l,isPlaying:o,size:s})=>{const c=(0,w.s)(),d=(0,i.useCallback)((()=>{l?o?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()}),[l,o,c,a,r,t]);return(0,C.jsx)("div",{className:n()(hi,{[Si]:o,[fi]:"small"===s}),role:"gridcell",children:(0,C.jsx)(Ci.R,{isPlaying:o,onClick:d,ariaPlayLabel:b.Ru.get("playlist.a11y.play",e),ariaPauseLabel:b.Ru.get("playlist.a11y.pause",e),size:s})})};var Ri=r(27881),Pi=r(42112),Ti=r(44492),ji=r(57770),Ai=r(73231),Di=r(87945);const Li=(0,i.memo)((function({title:e,type:t,images:r,isCircular:i,color:a,animateState:l,animateClassName:o=""}){const s=(0,Ai._)();return(0,C.jsx)(Ri.b,{fadeIn:!0,images:s(r,48),shape:i?Ri.u.CIRCLE:Ri.u.ROUNDED_CORNERS,size:Pi.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:n()(jr.A.entityImage,{[o]:l}),color:a,loadingMode:"eager"})})),Ei=(0,i.memo)((function({title:e,type:t,uri:r,images:a,isCircular:n,togglePlay:l,color:o,spec:s,isActive:c,isPlaying:u}){const p=(0,d.NC)(Di.AE),g=gi(),m=(0,Ai._)(),[y,x]=(0,i.useState)("medium"),b=(0,i.useRef)(null);return(0,ji.w)({onResize:({width:e})=>{x(e<90?"small":"medium")},refOrElement:b}),(0,C.jsx)("div",{className:bi,ref:b,children:(0,C.jsx)(wi.M,{images:m(a,250),FallbackComponent:e=>(0,C.jsx)(Ti.s,{semanticColor:"textSubdued",type:t,size:"xxlarge",className:p?xi:"",...e}),isCircular:n,color:o,loadingMode:"eager",children:l&&!g&&(0,C.jsx)(Ii,{name:e,uri:r,togglePlay:l,spec:s,isActive:c,isPlaying:u,size:y})})})}));var Oi=r(66928);const ki="_ymJNIfklFmogab9uWY1",Ni=({folderDepth:e=0})=>(0,C.jsx)("li",{className:ki,style:{"--ylx-folder-depth":e}}),Fi=e=>{const{RowVariantComponent:t,uri:r,to:a=(0,hr.o_)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:o,className:s,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:m,style:y,openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:f,type:S,menu:v,name:w,subtitle:I,downloadButton:R,expandFolderButton:P,cover:T,alt:j,addedAt:A,lastPlayedAt:L,shouldShowType:E,playbackUri:O,playInsteadOfNavigating:k,spec:N,nrValidItems:F,index:B,lockedIcon:M,onKeyDown:U,preReleaseIcon:V,..._}=e,{onClick:H,onDoubleClick:W,onDragStart:z,onKeyDown:X,dropPosition:K,dropTargetClassName:Y,draggable:G,unpinConfirmationDialog:Z,logRightClick:J,isViewActive:q,itemRef:Q,...$}=ni({uri:r,to:a,type:S,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:m,openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:f,playInsteadOfNavigating:k,spec:N,folderDepth:o}),ee=(0,i.useCallback)((e=>{X(e),U?.(e)}),[X,U]);return(0,C.jsxs)(C.Fragment,{children:[Z,K===D.Nz.BEFORE&&(0,C.jsx)(Ni,{folderDepth:o}),(0,C.jsx)(Oi.c,{style:{"--ylx-folder-depth":o,...y},draggable:G,onDragStart:z,onDoubleClick:W,className:n()(s,Y,kt,{[Wt]:K===D.Nz.ON}),..._,...$,onKeyDown:ee,innerRef:Q,"aria-setsize":F,"aria-posinset":B+1,children:(0,C.jsx)(t,{...e,to:a,isActive:f,isViewActive:q,onClick:H,logRightClick:J,playInsteadOfNavigating:k,parentRef:Q})}),K===D.Nz.AFTER&&(0,C.jsx)(Ni,{folderDepth:o})]})};var Bi=r(18038);const Mi=({locked:e})=>e?(0,C.jsx)(Bi.u,{semanticColor:"textSubdued",title:b.Ru.get("mwp.header.content.unavailable"),className:jr.A.icon,size:"xsmall"}):null;var Ui=r(57420);function Vi(e){const{uri:t,artists:r,isPremiumOnly:a}=e,{filter:n}=(0,i.useContext)(Q.g),{isPlaying:l,isActive:s}=(0,Nr.l_)(t),c=(0,o.wA)(),d=(0,i.useCallback)((()=>{c((0,pr.aw)(t))}),[c,t]),{togglePlay:u}=(0,Ui.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:s,openDeleteDialog:d,togglePlay:a?void 0:u,menu:(0,C.jsx)(gr.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(yr.M,{searchWords:[n.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,C.jsx)(mr.M,{uri:t,size:"xsmall",className:jr.A.icon,as:"span"})}}const _i=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g,isPremiumOnly:m}=e,{isPlaying:y,isActive:x,openDeleteDialog:b,togglePlay:h,menu:f,subtitleText:S,downloadButton:v}=Vi(e),w=(0,C.jsx)(Li,{title:s,type:d,images:o,color:g}),I=(0,C.jsx)(Mi,{locked:m});return(0,C.jsx)(Fi,{RowVariantComponent:r,uri:l,cover:w,name:s,subtitle:S,downloadButton:v,alt:s,type:d,dragLabel:s,menu:f,togglePlay:h,openDeleteDialog:b,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:y,isActive:x,shouldShowType:t,spec:i,nrValidItems:a,index:n,lockedIcon:I})},Hi=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:o,type:s,color:c,isPremiumOnly:d}=e,{togglePlay:u,menu:p,subtitleText:g,downloadButton:m,openDeleteDialog:y,isPlaying:x,isActive:b}=Vi(e),h=(0,C.jsx)(Ei,{title:l,type:s,images:n,uri:a,togglePlay:u,color:c,spec:r,isActive:b,isPlaying:x}),f=(0,C.jsx)(Mi,{locked:d});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:g,menu:p,dragLabel:l,cover:h,downloadButton:m,type:s,togglePlay:u,isPinned:o,shouldShowType:t,openDeleteDialog:y,isPlaying:x,isActive:b,spec:r,index:i,lockedIcon:f})};var Wi=r(19758);function zi(e){const{uri:t}=e,r=(0,o.wA)(),{togglePlay:a}=(0,Ui.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:n,isActive:l}=(0,Nr.l_)(t);return{togglePlay:a,isPlaying:n,isActive:l,openDeleteDialog:(0,i.useCallback)((()=>{r((0,pr.aw)(t))}),[r,t]),menu:(0,C.jsx)(Wi.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Xi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{togglePlay:m,isPlaying:y,isActive:x,openDeleteDialog:b,menu:h}=zi(e),f=(0,C.jsx)(Li,{title:s,type:c,images:o,isCircular:!0,color:g});return(0,C.jsx)(Fi,{RowVariantComponent:r,uri:l,cover:f,name:s,type:c,alt:s,dragLabel:s,menu:h,togglePlay:m,openDeleteDialog:b,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:x,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Ki=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{togglePlay:d,menu:u,openDeleteDialog:p,isPlaying:g,isActive:m}=zi(e),y=(0,C.jsx)(Ei,{title:l,type:o,images:n,uri:a,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:m,isPlaying:g});return(0,C.jsx)(vi,{uri:a,name:l,menu:u,dragLabel:l,cover:y,type:o,togglePlay:d,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:g,isActive:m,spec:r,index:i})};var Yi=r(21146);function Gi(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(Q.g),n=(0,o.wA)(),{isPlaying:l,isActive:s}=(0,Nr.l_)(t);return{isPlaying:l,isActive:s,openDeleteDialog:(0,i.useCallback)((()=>{n((0,pr.aw)(t))}),[n,t]),menu:(0,C.jsx)(Yi.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(yr.M,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,C.jsx)(mr.M,{uri:t,size:"xsmall",className:jr.A.icon,as:"span"})}}const Zi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:g}=e,{isPlaying:m,isActive:y,openDeleteDialog:x,menu:b,subtitleText:h,downloadButton:f}=Gi(e),S=(0,C.jsx)(Li,{title:s,type:c,images:o,color:g}),v=(0,C.jsx)(Mi,{locked:e.isLocked});return(0,C.jsx)(Fi,{RowVariantComponent:r,uri:l,cover:S,name:s,subtitle:h,alt:s,dragLabel:s,menu:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPlaying:m,isActive:y,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:a,lockedIcon:v,index:n,downloadButton:f})},Ji=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:g,isActive:m,downloadButton:y}=Gi(e),x=(0,C.jsx)(Ei,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:m,isPlaying:g});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:x,isPinned:s,shouldShowType:t,type:o,openDeleteDialog:p,isPlaying:g,isActive:m,spec:r,index:i,downloadButton:y})};var qi=r(99452),Qi=r(82203);const $i=({uri:e,divider:t,onDeleteCallback:r})=>{const a=(0,f.W)(),n=(0,o.wA)(),l=(0,i.useCallback)((()=>{a({intent:"playlisting",type:"click"}),n((0,pr.OB)(e,r))}),[n,r,a,e]);return(0,C.jsx)(h.D,{role:"menuitem",divider:t,onClick:l,leadingIcon:(0,C.jsx)(Qi.P,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.delete")})},ea=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"delete-folder",children:(0,C.jsx)($i,{...e})})}));var ta=r(67921),ra=r(79522),ia=r(36744);const aa=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:a,isActive:n}=(0,Ui.P)({uri:e},{featureIdentifier:"folder"}),l=(0,w.s)(),o=(0,i.useCallback)((()=>{r(),t&&l&&(a?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):n?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))}),[n,a,l,t,r,e]);return(0,C.jsx)(h.D,{role:"menuitem",onClick:o,leadingIcon:a?(0,C.jsx)(ra._,{semanticColor:"textSubdued",size:"small"}):(0,C.jsx)(ia.A,{semanticColor:"textSubdued",size:"small"}),children:a?b.Ru.get("pause"):b.Ru.get("play")})},na=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"create-folder",children:(0,C.jsx)(aa,{...e})})}));var la=r(75630);const oa=({uri:e,name:t,divider:r,spec:a,handleRename:n})=>{const l=(0,w.s)(),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{a&&l.logInteraction(a.editButtonFactory({uri:e}).hitUiReveal()),s((0,pr.O2)(t,n))}),[s,l,t,n,a,e]);return(0,C.jsx)(h.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,C.jsx)(la.G,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.rename")})},sa=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"rename",children:(0,C.jsx)(oa,{...e})})}));var ca=r(25140),da=r(36869);const ua=i.memo((function({reference:e,name:t="",onRename:r,onCreateCallback:i=(()=>{}),onDeleteCallback:a,canPin:n=P.oT.NO,isPinned:l=!1,isPlayable:o=!0}){const{spec:s}=(0,T.o)(e.uri),c=(0,da.Ek)()&&o;return(0,C.jsx)(v.pZ,{value:"folder",children:(0,C.jsxs)(m.W,{children:[(0,C.jsx)(sa,{spec:s,uri:e.uri,name:t,handleRename:r}),(0,C.jsx)(ea,{uri:e.uri,divider:"after",onDeleteCallback:a}),(n!==P.oT.NO||l)&&(0,C.jsx)(ta.k,{uri:e.uri,canPin:n,isPinned:l,type:li.c.FOLDER,spec:s}),(0,C.jsx)(R,{position:{after:e},onCreateCallback:i,spec:s}),(0,C.jsx)(y.j,{position:{after:e},onCreateCallback:i,spec:s}),(0,C.jsx)(ca.y,{uriToBeAdded:e.uri,isInLibrary:!0,spec:s}),c&&(0,C.jsx)(na,{uri:e.uri,spec:s})]})})}));function pa(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,S.A)(),n=(0,w.s)(),l=(0,Qr.g)(),o=$r(),s=(0,i.useCallback)((r=>{if(!t)return;const{[A.fl.PLAYLISTS_V2]:i=[],[A.fl.FOLDERS]:a=[]}=r,s={after:{uri:t}};i.length&&(o(i,s),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},s),n.logInteraction(e.dragSort()))}),[o,n,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Jr({onApplyDrop:s});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[A.fl.TRACKS]:l=[],[A.fl.LOCAL_TRACKS]:o=[],[A.fl.ALBUMS]:s=[],[A.fl.EPISODES]:c=[],[A.fl.PLAYLISTS_V2]:u=[],[A.fl.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?d(i,D.Nz.ON):s.length?(r(s[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||o.length||c.length)&&(a([...l,...o,...c],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,d,r,n,e,a])}}var ga=r(17782),ma=r(69520),ya=r(50152),xa=r(76318),ba=r(61514),ha=r(38783),fa=r(50580);const Sa=({uri:e})=>{const[t,r]=(0,i.useState)(!1),a=(0,ga.x)(),n=(0,i.useCallback)((()=>{r(!0),setTimeout((()=>{r(!1)}),500)}),[]);return(0,ya.l)(ma.UV.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===a.getDefaultCurationContextUri(t.data.uris[0])&&n()})),(0,ba.e)(xa.Lj.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===t.data.uri&&n()})),(0,ha.b)(fa.tD.OPERATION_COMPLETE,(t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,hr.fp)(e)&&n()})),{animateState:t,animateClassName:jr.A.pulse}};var va=r(34157),wa=r(37535);function Ca(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:s}=e,{isPlaying:c,isActive:d}=(0,Nr.l_)(r),{pushFolder:u}=(0,i.useContext)(sr),p=(0,o.wA)(),{togglePlay:g}=(0,Ui.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),m=(0,o.d4)((e=>e.platform.isDesktop)),{handleDropOnFolder:y,unpinConfirmationDialog:x}=pa(t,r),{renameFolder:h}=(0,va.Z)(),f=y,S=[l>0||!n?b.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?b.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(wa.P).join(b.Ru.getSeparator()),v=(0,i.useCallback)(((t="")=>{h(e,t)}),[e,h]),w=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,pr.OB)(r))}),[p,r]),togglePlay:m?g:void 0,menu:(0,C.jsx)(ua,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:s,onRename:v,isPlayable:!e.isEmpty}),subtitleText:S,onDropTargetDropOn:f,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:x,isPlaying:c,isActive:d}}const Ia=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:a,index:l})=>{const{uri:o,folderDepth:s,name:c,type:d,isFlattened:u,pinned:p,canReorder:g}=e,{openDeleteDialog:m,togglePlay:y,menu:x,subtitleText:h,onDropTargetDropOn:f,handleNavigate:S,dropOnFolderUnpinConfirmationDialog:v,isPlaying:I,isActive:R}=Ca(e,r),[P,T]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(yt);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(o),j=(0,w.s)(),A=(0,i.useCallback)((()=>{T(!0),j.logInteraction(r.yourLibraryItemFactory().dragUiReveal())}),[j,T,r]),D=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),L=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),T(!P),P?j.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):j.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[T,P,j,r]),E=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?T(!1):"ArrowRight"===e.key&&T(!0)}),[T]),O=!u&&(0,C.jsx)(Fe.H,{"data-skip-in-keyboard-nav":!0,"aria-label":P?b.Ru.get("web-player.your-library-x.collapse-folder"):b.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:qi.y,size:"small",condensedAll:!0,onClick:L,onDoubleClick:D,tabIndex:-1,className:n()(vt,wt,{[Ot]:!P})}),{animateState:k,animateClassName:N}=Sa({uri:o}),F=(0,C.jsx)(Li,{title:c,type:d,animateState:k,animateClassName:N});return(0,C.jsxs)(C.Fragment,{children:[v,(0,C.jsx)(Fi,{onKeyDown:E,RowVariantComponent:t,uri:o,to:`/folder/${(0,hr.o_)(o)?.id??""}`,handleNavigate:S,folderDepth:s,cover:F,name:c,subtitle:h,alt:c,dragLabel:c,menu:x,canReorder:g,allowedDropTargetDropOnMimeTypes:tr,onDropTargetDropOn:f,onLongDragOver:A,togglePlay:y,openDeleteDialog:m,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:I,isActive:R,expandFolderButton:O,spec:r,nrValidItems:a,index:l})]})},Ra=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:a,type:n,pinned:l,canReorder:o}=e,{togglePlay:s,menu:c,subtitleText:d,onDropTargetDropOn:u,handleNavigate:p,openDeleteDialog:g,isPlaying:m,isActive:y}=Ca(e,t),{animateState:x,animateClassName:b}=Sa({uri:i}),h=(0,C.jsx)(Ei,{title:a,type:n,uri:i,togglePlay:s,spec:t,isActive:y,isPlaying:m});return(0,C.jsx)(vi,{uri:i,to:`/folder/${(0,hr.o_)(i)?.id??""}`,handleNavigate:p,cover:h,name:a,subtitle:d,menu:c,dragLabel:a,canReorder:o,allowedDropTargetDropOnMimeTypes:tr,onLongDragOver:p,onDropTargetDropOn:u,togglePlay:s,isPinned:l,shouldShowType:!1,type:n,openDeleteDialog:g,isPlaying:m,isActive:y,spec:t,index:r,animateState:x,animateClassName:b})};var Pa=r(49251);const Ta=i.memo((function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:a}=(0,T.o)(e);return(0,C.jsx)(v.pZ,{value:"generic",children:(0,C.jsxs)(m.W,{children:[i?(0,C.jsx)(Pa.d,{spec:a,uri:i}):null,t!==P.oT.NO&&(0,C.jsx)(ta.k,{uri:e,canPin:t,isPinned:r,type:li.c.PLAYLIST,spec:a})]})})}));var ja=r(28773);const Aa=[A.fl.TRACKS,A.fl.LOCAL_TRACKS];function Da(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,o.d4)(ja.Ht),n=(0,hr.fH)(a?.id).toURI(),l=n,s=n,{togglePlay:c}=(0,Ui.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),d=(0,Ht.f)(),{isPlaying:u,isActive:p}=(0,Nr.l_)(l),g=(0,i.useCallback)((e=>{const{[A.fl.TRACKS]:t=[],[A.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&d?.add({uris:i})}),[d]);return{isPlaying:u,isActive:p,togglePlay:c,menu:(0,C.jsx)(Ta,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:s}),downloadButton:(0,C.jsx)(mr.M,{uri:s,size:"xsmall",className:jr.A.icon,as:"span"}),subtitleText:(0,C.jsx)(C.Fragment,{children:b.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:g,playbackUri:l,uri:r,...Sa({uri:r})}}const La=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{images:l,name:o,type:s,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:g,isActive:m,togglePlay:y,menu:x,subtitleText:b,onDropTargetDropOn:h,playbackUri:f,uri:S,downloadButton:v,animateState:w,animateClassName:I}=Da(e),R=(0,C.jsx)(Li,{title:o,type:s,images:l,color:p,animateState:w,animateClassName:I});return(0,C.jsx)(Fi,{RowVariantComponent:r,uri:S,cover:R,name:o,subtitle:b,alt:o,dragLabel:o,menu:x,allowedDropTargetDropOnMimeTypes:Aa,onDropTargetDropOn:h,togglePlay:y,addedAt:d,lastPlayedAt:u,isPlaying:g,isActive:m,isPinned:c,shouldShowType:t,type:s,playbackUri:f,downloadButton:v,spec:i,nrValidItems:a,index:n})},Ea=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:a,name:n,type:l,pinned:o,color:s}=e,{togglePlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,playbackUri:g,uri:m,downloadButton:y,isPlaying:x,isActive:b,animateState:h,animateClassName:f}=Da(e),S=(0,C.jsx)(Ei,{title:n,type:l,images:a,uri:g,togglePlay:c,color:s,spec:r,isActive:b,isPlaying:x});return(0,C.jsx)(vi,{uri:m,name:n,subtitle:u,menu:d,dragLabel:n,allowedDropTargetDropOnMimeTypes:Aa,onDropTargetDropOn:p,cover:S,togglePlay:c,isPinned:o,shouldShowType:t,type:l,playbackUri:g,downloadButton:y,isPlaying:x,isActive:b,spec:r,index:i,animateState:h,animateClassName:f})};var Oa=r(67409),ka=r(45109),Na=r(32673),Fa=r(28406);function Ba(e){const{numberOfFiles:t}=e,r=Fa.bV,i=(0,Na.Iu)().uri,{isPlaying:a,isActive:n}=(0,Nr.l_)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,C.jsx)(Ta,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,C.jsx)(Oa.F,{size:"xsmall",className:jr.A.icon,semanticColor:"textBrightAccent"}),subtitleText:b.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Ma=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{name:l,addedAt:o,lastPlayedAt:s,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:g,menu:m,subtitleText:y,downloadButton:x,isActive:b}=Ba(e),h=(0,C.jsx)("div",{className:Ct,children:(0,C.jsx)(ka.e,{iconSize:24,title:l})});return(0,C.jsx)(Fi,{RowVariantComponent:r,uri:p,name:l,subtitle:y,alt:l,dragLabel:l,menu:m,addedAt:o,lastPlayedAt:s,isPinned:d,isPlaying:g,isActive:b,shouldShowType:t,playbackUri:u,downloadButton:x,cover:h,type:c,spec:i,nrValidItems:a,index:n})},Ua=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:a,images:n,type:l,pinned:o}=e,{playbackUri:s,uri:c,menu:u,downloadButton:p,subtitleText:g,isPlaying:m,isActive:y}=Ba(e),x=(0,d.NC)(Di.AE),b=(0,C.jsx)("div",{className:bi,children:(0,C.jsx)(wi.M,{images:n,FallbackComponent:e=>(0,C.jsx)(ka.e,{size:"xxlarge",className:x?xi:"",...e})})});return(0,C.jsx)(vi,{uri:c,name:a,subtitle:g,menu:u,cover:b,type:l,playbackUri:s,downloadButton:p,isPinned:o,shouldShowType:t,isPlaying:m,isActive:y,spec:r,index:i})};var Va=r(18701);const _a=({index:e,type:t})=>{const r=(0,d.NC)(Di.AE),i=gi();return(0,C.jsx)(Va.T,{columnIndex:0,children:(0,C.jsx)(xr.Z,{className:n()(mi,{[yi]:i}),media:(0,C.jsx)(wi.M,{images:[],FallbackComponent:()=>(0,C.jsx)(Ti.s,{type:t,size:"xxlarge",className:r?xi:"",semanticColor:"textSubdued"}),isCircular:t===li.c.ARTIST}),variant:"naked",id:e,title:"",padding:i?br.vw:br.CJ})})};var Ha=r(53435),Wa=r(92565),za=r(50237),Xa=r(69401),Ka=r(45741),Ya=r(24113),Ga=r(92613),Za=r(28661),Ja=r(3801),qa=r(4883),Qa=r(36401),$a=r(89785),en=r(86297),tn=r(43516),rn=r(45818),an=r(66596),nn=r(3485),ln=r(75855);const on=i.memo((function({reference:e,isPublished:t,canPin:r=P.oT.NO,isPinned:i=!1,useDialogForUnfollow:a=!1,isInLibrary:n}){const{uri:l}=e,o=(0,nn.J)(l),s=!!o?.permissions?.isPrivate,c=(0,ln.v)(l)??o?.isPublished??t,{spec:d}=(0,T.o)(l),u=o?.hasSpotifyAudiobooks;return o&&(0,C.jsx)(v.pZ,{value:"playlist",children:(0,C.jsxs)(m.W,{children:[!u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(za.K,{spec:d,uris:[l]}),(0,C.jsx)(an._,{uri:l,spec:d})]}),!s&&(0,C.jsx)($a._,{spec:d,divider:o.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),o.isOwnedBySelf&&(0,C.jsx)(Ya.T,{spec:d,uri:l,name:o.name,description:o.description,image:o.images[0]}),!o.isOwnedBySelf&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(en.P,{spec:d,uri:l}),(0,C.jsx)(Wa.ET,{uri:l,useDialog:a,initialState:n})]}),o.isOwnedBySelf&&(0,C.jsx)(Ka.u,{spec:d,uri:l}),!u&&(0,C.jsx)(Pa.d,{spec:d,uri:l}),(0,C.jsx)(R,{position:{after:e},divider:"before",spec:d}),(0,C.jsx)(y.j,{position:{after:e},spec:d}),o.permissions?.canAdministratePermissions&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Qa.U,{spec:d,divider:"before",uri:l,isPrivate:s}),!u&&(0,C.jsx)(Za.n,{uri:l,spec:d})]}),o.permissions?.canCancelMembership&&(0,C.jsx)(Ja._,{spec:d,divider:"before",uri:l}),(0,C.jsx)(Ga.w,{spec:d,uri:l}),(0,C.jsx)(ca.y,{uriToBeAdded:l,isInLibrary:!0,spec:d}),!u&&(0,C.jsx)(tn.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==P.oT.NO||i)&&(0,C.jsx)(ta.k,{uri:l,canPin:r,isPinned:i,type:li.c.PLAYLIST,spec:d}),(o.isOwnedBySelf||!s)&&(0,C.jsxs)(rn.h,{divider:"before",children:[(0,C.jsx)(Xa.m,{spec:d,uri:l,displayText:b.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:s}),(0,C.jsx)(qa.x,{spec:d,uri:l,type:li.c.PLAYLIST})]})]})})})),sn=i.memo((function({reference:e,canPin:t=P.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:a}=(0,T.o)(i);return(0,C.jsx)(v.pZ,{value:"playlist",children:(0,C.jsxs)(m.W,{children:[(0,C.jsx)(R,{position:{after:e},divider:"before",spec:a}),(0,C.jsx)(y.j,{position:{after:e},spec:a}),t!==P.oT.NO&&(0,C.jsx)(ta.k,{uri:i,canPin:t,isPinned:r,type:li.c.PLAYLIST,spec:a})]})})}));var cn=r(73642);const dn=()=>(0,cn.m)().getCapabilities();function un(e,t){const{uri:r,isLoading:a,owner:n,pinned:l}=e,s=(0,cn.m)(),{filter:c}=(0,i.useContext)(Q.g),{canAddAudiobooks:d}=dn(),u=[A.fl.TRACKS,A.fl.LOCAL_TRACKS,A.fl.ALBUMS,A.fl.EPISODES],p=d?[A.fl.AUDIOBOOKS]:[];(0,i.useEffect)((()=>{a&&s.resync(r)}),[s,r,a]);const{togglePlay:g}=(0,Ui.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:y,isActive:x}=(0,Nr.l_)(r),h=(0,o.wA)(),f=(0,w.s)();let S,v=[];const I=(0,i.useCallback)((async e=>{const{[A.fl.TRACKS]:i=[],[A.fl.LOCAL_TRACKS]:a=[],[A.fl.ALBUMS]:n=[],[A.fl.EPISODES]:l=[],[A.fl.AUDIOBOOKS]:o=[]}=e,s=[...i,...a,...n,...l,...o];h((0,Ha.io)(r,s)),f.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:s.at(0)??"",playlist:r}))}),[h,f,t,r]);e.canAddTo&&(v=e.isEmpty?[...p,...u]:e.isBooklist?p:u,S=I);const R=(0,i.useCallback)((()=>{h((0,pr.O)(r))}),[h,r]),P=(0,ur.c0)(r),T=a&&!e.name;let j;j=P?(0,C.jsx)(sn,{reference:e,canPin:e.canPin,isPinned:l}):T?(0,C.jsx)(m.W,{children:(0,C.jsx)(Wa.ET,{uri:r,initialState:!0})}):(0,C.jsx)(on,{reference:e,canPin:e.canPin,isPinned:l,useDialogForUnfollow:!0,isInLibrary:!0});const D=(0,C.jsx)(mr.M,{uri:r,size:"xsmall",className:jr.A.icon,as:"span"}),L=(0,ur.c0)(r)?(0,C.jsx)(C.Fragment,{children:b.Ru.get("ylx.clicktoplay")}):(n.uri,(0,C.jsx)(yr.M,{searchWords:[c.trim()],textToHighlight:n.name}));return{openDeleteDialog:R,togglePlay:!!(0,ur.c0)(r)||!e.isBooklist&&!e.isEmpty?g:void 0,isPlaying:y,isActive:x,menu:j,downloadButton:D,subtitleText:L,allowedDropTargetDropOnMimeTypes:v,onDropTargetDropOn:S,...Sa({uri:r})}}const pn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,folderDepth:s,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:g,color:m,canReorder:y}=e,{openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:f,menu:S,downloadButton:v,subtitleText:w,allowedDropTargetDropOnMimeTypes:I,onDropTargetDropOn:R,animateState:P,animateClassName:T}=un(e,i),j=(0,C.jsx)(Li,{title:c,type:d,images:o,color:m,animateState:P,animateClassName:T});return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Fi,{RowVariantComponent:r,uri:l,folderDepth:s,cover:j,name:c,subtitle:w,alt:c,dragLabel:c,menu:S,canReorder:y,allowedDropTargetDropOnMimeTypes:I,onDropTargetDropOn:R,togglePlay:b,openDeleteDialog:x,addedAt:p,lastPlayedAt:g,isPlaying:h,isActive:f,isPinned:u,shouldShowType:t,type:d,downloadButton:v,spec:i,playInsteadOfNavigating:(0,ur.c0)(l),nrValidItems:a,index:n})})},gn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c,canReorder:d}=e,{togglePlay:u,menu:p,downloadButton:g,subtitleText:m,onDropTargetDropOn:y,allowedDropTargetDropOnMimeTypes:x,openDeleteDialog:b,isPlaying:h,isActive:f,animateState:S,animateClassName:v}=un(e,r),w=(0,C.jsx)(Ei,{title:l,type:o,images:n,uri:a,togglePlay:u,color:c,spec:r,isActive:f,isPlaying:h});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:m,menu:p,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:x,onDropTargetDropOn:y,cover:w,togglePlay:u,isPinned:s,shouldShowType:t,type:o,downloadButton:g,openDeleteDialog:b,isPlaying:h,isActive:f,spec:r,playInsteadOfNavigating:(0,ur.c0)(a),index:i,animateState:S,animateClassName:v})};var mn=r(29997),yn=r(63244),xn=r(77769),bn=r(21511);const hn=i.memo((function({uri:e,canPin:t=P.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:a}=(0,T.o)(e);return(0,C.jsx)(v.pZ,{value:"audiobook",children:(0,C.jsxs)(m.W,{children:[i&&(0,C.jsx)(bn.p,{uri:e,removeLabel:b.Ru.get("contextmenu.remove-from-library")}),t!==P.oT.NO&&(0,C.jsx)(ta.k,{uri:e,canPin:t,isPinned:r,type:li.c.PRE_RELEASE_BOOK,spec:a}),(0,C.jsx)(Xa.m,{uri:e,spec:a,displayText:b.Ru.get("context-menu.copy-book-link")}),(0,C.jsx)(xn.q,{spec:a,divider:"before",uri:e})]})})}));function fn(e){const{uri:t,canPin:r,pinned:a,type:n}=e,{filter:l}=(0,i.useContext)(Q.g),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{s((0,pr.aw)(t,!0))}),[s,t]);let d,u="";if(n===li.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,C.jsx)(yn.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:a,canRemove:!0})}else u=e.authorName,d=(0,C.jsx)(hn,{uri:t,canPin:r,isPinned:a,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,C.jsx)(yr.M,{searchWords:[l.trim()],textToHighlight:u})}}const Sn=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{openDeleteDialog:m,menu:y,subtitleText:x}=fn(e),b=(0,C.jsx)(Li,{title:s,type:d,images:o,color:g});return(0,C.jsx)(Fi,{RowVariantComponent:r,uri:l,cover:b,name:s,subtitle:x,alt:s,type:d,dragLabel:s,menu:y,openDeleteDialog:m,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n,preReleaseIcon:(0,C.jsx)(mn.t,{size:"xsmall",className:jr.A.icon})})},vn=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:o,type:s,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=fn(e),g=(0,C.jsx)(Ei,{title:l,type:s,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:g,type:s,isPinned:o,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,C.jsx)(mn.t,{size:"xsmall",className:jr.A.icon})})};var wn=r(95382);function Cn(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(Q.g),n=(0,o.wA)(),{togglePlay:l}=(0,Ui.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:c}=(0,Nr.l_)(t);return{isPlaying:s,isActive:c,openDeleteDialog:(0,i.useCallback)((()=>{n((0,pr.aw)(t))}),[n,t]),togglePlay:l,menu:(0,C.jsx)(wn.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,C.jsx)(mr.M,{uri:t,size:"xsmall",className:jr.A.icon,as:"span"}),subtitleText:(0,C.jsx)(yr.M,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const In=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{isPlaying:m,isActive:y,openDeleteDialog:x,togglePlay:b,menu:h,downloadButton:f,subtitleText:S}=Cn(e),v=(0,C.jsx)(Li,{title:s,type:c,images:o,color:g});return(0,C.jsx)(Fi,{RowVariantComponent:r,uri:l,cover:v,name:s,subtitle:S,alt:s,dragLabel:s,menu:h,togglePlay:b,openDeleteDialog:x,addedAt:d,lastPlayedAt:u,isPlaying:m,isActive:y,isPinned:p,shouldShowType:t,type:c,downloadButton:f,spec:i,nrValidItems:a,index:n})},Rn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{togglePlay:d,menu:u,downloadButton:p,subtitleText:g,openDeleteDialog:m,isPlaying:y,isActive:x}=Cn(e),b=(0,C.jsx)(Ei,{title:l,type:o,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:x,isPlaying:y});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:g,menu:u,dragLabel:l,cover:b,togglePlay:d,isPinned:s,shouldShowType:t,type:o,downloadButton:p,openDeleteDialog:m,isPlaying:y,isActive:x,spec:r,index:i})},Pn=[A.fl.EPISODES];function Tn(e){const{numberOfDownloadedEpisodes:t,uri:r}=e,a=(0,d.NC)(z.ucV,{loadingValue:!1}),{user:n}=(0,o.d4)(ja.Ht),l=(0,hr.fH)(n?.id,"your-episodes").toURI(),s=a?r:l,c=P.Xn,{togglePlay:u}=(0,Ui.P)({uri:s},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:p,isActive:g}=(0,Nr.l_)(s),m=(0,Ht.f)(),y=(0,i.useCallback)((e=>{const{[A.fl.EPISODES]:t=[]}=e;t?.length&&m?.add({uris:t})}),[m]);return{isPlaying:p,isActive:g,togglePlay:u,menu:(0,C.jsx)(Ta,{uri:c,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,C.jsx)(Oa.F,{size:"xsmall",className:jr.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:b.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:y,playbackUri:s,uri:c,...Sa({uri:c})}}const jn=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:a})=>{const{images:n,name:l,type:o,pinned:s,lastPlayedAt:c,addedAt:d,color:u}=e,{isPlaying:p,isActive:g,togglePlay:m,menu:y,downloadButton:x,subtitleText:b,onDropTargetDropOn:h,playbackUri:f,uri:S,animateState:v,animateClassName:w}=Tn(e),I=(0,C.jsx)(Li,{title:l,type:o,images:n,color:u,animateState:v,animateClassName:w});return(0,C.jsx)(Fi,{RowVariantComponent:t,uri:S,cover:I,name:l,subtitle:b,alt:l,dragLabel:l,menu:y,allowedDropTargetDropOnMimeTypes:Pn,onDropTargetDropOn:h,togglePlay:m,addedAt:d,lastPlayedAt:c,isPlaying:p,isActive:g,isPinned:s,shouldShowType:!1,type:o,downloadButton:x,playbackUri:f,spec:r,nrValidItems:i,index:a})},An=({libraryItem:e,spec:t,index:r})=>{const{images:i,name:a,type:n,pinned:l,color:o}=e,{togglePlay:s,menu:c,downloadButton:d,subtitleText:u,onDropTargetDropOn:p,playbackUri:g,uri:m,isPlaying:y,isActive:x,animateState:b,animateClassName:h}=Tn(e),f=(0,C.jsx)(Ei,{title:a,type:n,images:i,uri:m,togglePlay:s,color:o,spec:t,isActive:x,isPlaying:y});return(0,C.jsx)(vi,{uri:m,name:a,subtitle:u,menu:c,dragLabel:a,allowedDropTargetDropOnMimeTypes:Pn,onDropTargetDropOn:p,cover:f,togglePlay:s,playbackUri:g,downloadButton:d,isPinned:l,shouldShowType:!1,type:n,isPlaying:y,isActive:x,spec:t,index:r,animateState:b,animateClassName:h})};function Dn(){const e=(0,d.NC)(z.AEN),[t,r]=(0,ve.x)("ylx-grid-scale",1);return{gridScale:e?t:1,setGridScale:r}}var Ln=r(945),En=r(16915),On=r(68306);const kn=({span:e,onInView:t,marginBottom:r,marginTop:a})=>{const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t()}))}));return n.current&&e.observe(n.current),()=>{e.disconnect()}}),[t]),e<=0?null:(0,C.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${e}`,marginBottom:r,marginTop:a},ref:n,"data-type":"sentinel"},"topSentinel")},Nn=({renderItems:e,nrItems:t,estimatedItemMaxHeight:r,scrollNodeRef:a,nrRowsOverscan:n=5,initalNrRows:l=5,onGridResize:o})=>{const[s,c]=(0,i.useState)({firstRowToRender:0,nrRows:l+n}),d=(0,i.useRef)(0),u=(0,i.useRef)(null),p=(0,i.useRef)(r),g=(0,i.useCallback)((()=>{const e=u.current?.querySelector(':scope > *:not([data-type="sentinel"])');p.current=e?e.getBoundingClientRect().height:p.current}),[]),m=(0,i.useCallback)((()=>{const e=a.current;if(!e)return;g();const t=Math.floor((e.scrollTop-d.current)/p.current),r=Math.max(t-n,0),i=Math.ceil(e.offsetHeight/p.current)+2*n;r===s.firstRowToRender&&i===s.nrRows||c({firstRowToRender:r,nrRows:i})}),[n,s,a,g]),y=(0,i.useCallback)((({columnCount:r})=>{if(r<=0)return[null];o&&o(r,p.current);const i=Math.ceil(t/r),a=s.firstRowToRender*r,l=s.firstRowToRender+s.nrRows-1,c=Math.min(t-1,(l+1)*r-1),d=p.current*(n-2);return[(0,C.jsx)(kn,{span:s.firstRowToRender,onInView:m,marginBottom:`-${d}px`},`topSentinel-${s.firstRowToRender}`),e(a,c,r),(0,C.jsx)(kn,{span:i-l,onInView:m,marginTop:`-${d}px`},"bottomSentinel-"+(i-l))]}),[t,n,o,m,e,s]);return(0,i.useEffect)((()=>{const e=u.current,t=a.current;e&&t&&(d.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[a]),(0,C.jsx)(On.E,{useUniformRowHeight:!0,ref:u,render:y,onLayoutChange:g})},Fn=(0,X.g)(li.c),Bn=(0,i.memo)((function({item:e,primaryFilter:t,spec:r,index:i}){const a={shouldShowType:!(0,ur.c0)(e.uri)&&ci(e.type)!==t,spec:r,index:i},n=(0,d.NC)(z.lDH),l=(0,d.NC)(z.H8e);switch(e.type){case li.c.FOLDER:return(0,C.jsx)(Ra,{libraryItem:e,...a});case li.c.ALBUM:return(0,C.jsx)(Hi,{libraryItem:e,...a});case li.c.ARTIST:return(0,C.jsx)(Ki,{libraryItem:e,...a});case li.c.AUDIOBOOK:return(0,C.jsx)(Ji,{libraryItem:e,...a});case li.c.SHOW:return(0,C.jsx)(Rn,{libraryItem:e,...a});case li.c.PLAYLIST:return(0,C.jsx)(gn,{libraryItem:e,...a});case li.c.LIKED_SONGS:return(0,C.jsx)(Ea,{libraryItem:e,...a});case li.c.YOUR_EPISODES:return(0,C.jsx)(An,{libraryItem:e,...a});case li.c.LOCAL_FILES:return(0,C.jsx)(Ua,{libraryItem:e,...a});case li.c.PRE_RELEASE_ALBUM:return n?(0,C.jsx)(vn,{libraryItem:e,...a}):null;case li.c.PRE_RELEASE_BOOK:return l?(0,C.jsx)(vn,{libraryItem:e,...a}):null;default:(0,oi.d)(e)}})),Mn=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const{gridScale:l}=Dn(),o=(0,En.s1)(En.yV.YLX,l),s=(0,i.useRef)({}),c=function(){const{gridScale:e}=Dn();return!!(0,d.NC)(z.AEN)&&e<.8}(),u=(0,i.useCallback)((e=>(0,C.jsx)(_a,{index:e,type:Fn(r)?r:void 0},e)),[r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>e?(0,C.jsx)(Bn,{item:e,spec:n,primaryFilter:r,index:t+i},e.uri):u(`${t+i}`)))),[e,r,u,n]),g=(0,i.useCallback)(((e,t)=>{s.current={numColumns:e,rowHeight:t}}),[]);return(0,C.jsx)(Ln.x,{config:o,children:(0,C.jsx)(pi,{isCompact:c,children:(0,C.jsx)(dr.R,{firstInteractiveIsWrapper:!0,"aria-label":b.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(s.current.numColumns??1)),"aria-colcount":s.current.numColumns,children:(0,C.jsx)(Nn,{renderItems:p,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:g})})})})};var Un=r(28215),Vn=r(27330),_n=r(94852);const Hn="main-yourLibraryX-header",Wn="ILEuCdEH9mglJaM4gKuf",zn="main-yourLibraryX-collapseButtonWrapper",Xn="main-yourLibraryX-headerContent",Kn="iYP0xuQiJCgi7gx1jUPJ",Yn="main-yourLibraryX-collapseButton",Gn="main-yourLibraryX-button",Zn="af749NDLYTDK_8LinKWD",Jn="nGWhztVvLY1BInXjcWYa",qn="oZT8iKL42zhLAm_zE5F5",Qn="MdDY8fQ_j94mQZy7ZVXf",$n="uNReR011bI8ML42Pgveg",el=e=>{switch(e){case Ue.fX.EXPANDED:return"expanded";case Ue.fX.COLLAPSED:return"collapsed";case Ue.fX.DEFAULT:return"default";default:throw(0,oi.k)(e)}},tl=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:a,ylxSidebarState:l,setYlxSidebarState:o,lastUncollapsedYlxSidebarState:s}=(0,Ue.$)(),c=(0,w.s)(),d=(0,i.useCallback)((()=>{const e=l===Ue.fX.COLLAPSED?s:Ue.fX.COLLAPSED;o(e),c.logInteraction(r.hitToggleState({stateBeforeToggle:el(l),stateAfterToggle:el(e)}))}),[l,s,o,c,r]),u=a?Vn.M:_n.A;return(0,C.jsx)(Me.Zp,{label:a?b.Ru.get("web-player.your-library-x.expand-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:(0,C.jsx)(Fe.H,{"aria-label":a?b.Ru.get("web-player.your-library-x.expand-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:d,className:n()(zn,Gn,t),condensed:!0,iconLeading:e||a?void 0:u,iconOnly:e||a?u:void 0,children:!e&&!a&&b.Ru.get("web-player.your-library-x.your-library")})})};var rl=r(84254),il=r(36771),al=r(34054);const nl=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,S.A)(),{createFolder:i}=(0,va.Z)(),a=(0,w.s)(),n=(0,Te.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,C.jsxs)(m.W,{children:[(0,C.jsx)(h.D,{onClick:()=>{r(void 0,l),a.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,C.jsx)(x.u,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!n&&(0,C.jsx)(h.D,{onClick:()=>{i(b.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(t.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,C.jsx)(al.h,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},ll=({className:e="",folderUri:t,tooltipPlacement:r,spec:a})=>{const l=b.Ru.get("web-player.your-library-x.create.button-label"),o=(0,w.s)(),{canAddAudiobooks:s}=dn(),{createPlaylistFromAlbum:c,createPlaylistFromTracks:d,createPlaylistFromPlaylist:u}=(0,S.A)(),{className:p,dropPosition:g,...m}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:[A.fl.TRACKS,A.fl.EPISODES,A.fl.ALBUMS,A.fl.PLAYLISTS_V2,...s?[A.fl.AUDIOBOOKS]:[]]},onDrop:(0,i.useCallback)((e=>{const{[A.fl.TRACKS]:r=[],[A.fl.LOCAL_TRACKS]:i=[],[A.fl.EPISODES]:a=[],[A.fl.AUDIOBOOKS]:n=[],[A.fl.ALBUMS]:l=[],[A.fl.PLAYLISTS_V2]:o=[]}=e,s=t?{after:{uri:t}}:{before:"start"},p=[...r,...i,...a];n.length>0?d(n,s):p.length?d(p,s):l.length>0?c(l[0],s):o.length>0&&u(o[0],s)}),[c,u,d,t])});return(0,C.jsx)(il.t,{renderInline:!0,menu:(0,C.jsx)(nl,{folderUri:t,spec:a.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,i,s)=>(0,C.jsx)(Me.Zp,{label:l,placement:r,children:(0,C.jsx)(Fe.H,{ref:s,iconOnly:rl.u,className:n()(e,p,{[zt]:g===D.Nz.ON}),"aria-label":l,onClick:e=>{i(e),o.logInteraction(a.hitUiReveal())},size:"small",...m})})})};var ol=r(84229),sl=r(52872);const cl=({dropTargetClassName:e,spec:t})=>{const{ylxSidebarState:r,setYlxSidebarState:i}=(0,Ue.$)(),a=r===Ue.fX.DEFAULT,l=(0,w.s)();return(0,C.jsx)(Me.Zp,{label:a?b.Ru.get("web-player.your-library-x.show-more"):b.Ru.get("web-player.your-library-x.show-less"),children:(0,C.jsx)(Fe.H,{className:n()(Gn,Jn,e),iconOnly:a?ol.h:sl.G,"aria-label":a?b.Ru.get("web-player.your-library-x.enlarge-your-library"):b.Ru.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{i(a?Ue.fX.EXPANDED:Ue.fX.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:a?"default":"expanded",stateAfterToggle:a?"expanded":"default"}))},size:"small"})})};var dl=r(76146);const ul=({handleNavigateBack:e,parentFolderUri:t,spec:r})=>{const{handleDropBeforeOrAfterRootlistItem:i}=ti({dropTargetUri:t,spec:r}),{dropPosition:a,className:l,...o}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:$t},onDrop:async e=>{i(e,D.Nz.BEFORE)},onLongDragOver:e});return(0,C.jsx)(Me.Zp,{label:b.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,C.jsx)(Fe.H,{className:n()(Gn,Zn,l,{[zt]:a===D.Nz.ON}),"aria-label":b.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:dl.g,size:"small",...o})})};var pl=r(82769),gl=r(70830);const ml=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,C.jsx)(gl.b,{menu:e,children:(0,C.jsx)("span",{children:(0,C.jsx)(Me.Zp,{label:b.Ru.get("more.label.context",t),children:(0,C.jsx)(Fe.H,{className:n()(Gn,Jn,r),iconOnly:pl.x,"aria-haspopup":"menu","aria-label":b.Ru.get("more.label.context",t),size:"small"})})})});var yl=r(8905),xl=r(8149),bl=r(84163);const hl=({dropTargetClassName:e,spec:t})=>{const{isGridView:r,setItemsView:i}=(0,bl.t)(),a=(0,w.s)();return(0,C.jsx)(Me.Zp,{label:r?b.Ru.get("web-player.your-library-x.list-view"):b.Ru.get("web-player.your-library-x.grid-view"),children:(0,C.jsx)(Fe.H,{className:n()(Gn,e),iconOnly:r?yl.N:xl.D,"aria-label":r?b.Ru.get("web-player.your-library-x.list-view"):b.Ru.get("web-player.your-library-x.grid-view"),onClick:()=>{i(r?bl.X.LIST:bl.X.GRID),a.logInteraction(t.hitToggleState({stateBeforeToggle:r?"grid":"list",stateAfterToggle:r?"list":"grid"}))},size:"small"})})},fl=(0,i.forwardRef)((function({folderUri:e,folderName:t,folderMenu:r,onRename:a,spec:l,className:s},c){const{isActive:d}=(0,Nr.l_)(e??"not-a-folder"),u=(0,o.wA)(),p=(0,w.s)(),m=(0,i.useCallback)((()=>{u((0,pr.O2)(t,a)),p.logInteraction(l.hitRenameFolder({uri:e}))}),[u,t,e,p,a,l]);return(0,C.jsx)(Me.Zp,{label:t,showDelay:Me.uF,children:(0,C.jsx)("div",{className:n()(Qn,s),children:(0,C.jsx)(g.h,{menu:r,children:(0,C.jsx)(Fe.H,{"aria-label":t,onClick:m,size:"small",condensed:!0,className:n()(Gn),ref:c,children:(0,C.jsx)(Re.E,{variant:"bodyMediumBold",semanticColor:d?"textBrightAccent":void 0,className:$n,children:t})})})})})}));var Sl=r(48583),vl=r(3680),wl=r(85100);const Cl="fJrnaZd0QWm65978IgD2",Il="yCpl0fAaEYj7E8F_Oabw",Rl=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=vl.I.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,wl.b)(r,a),e}();return e?(0,C.jsxs)("div",{className:Cl,children:[(0,C.jsxs)("div",{className:Il,children:[(0,C.jsx)(Re.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-title")}),(0,C.jsx)(Re.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,C.jsx)(Sl.z,{value:t})]}):null};const Pl=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:a,spec:l,openedFolderIsPlayable:o})=>{const{isCollapsed:s,ylxSidebarState:u,canExpand:p}=(0,Ue.$)(),{renameFolder:g}=(0,va.Z)(),{popFolder:m}=(0,i.useContext)(sr),y=(0,i.useCallback)(((e="")=>{r&&g({uri:r},e)}),[r,g]),x=(0,i.useCallback)((()=>{m()}),[m]),b=r?(0,C.jsx)(ua,{reference:{uri:r},name:a,onRename:y,onDeleteCallback:x,isPlayable:o}):null,{dropOriginIsYLX:h}=qr(),f=!s&&r&&void 0!==a,S=(0,i.useRef)(null),v=(0,i.useRef)(null),w=(0,i.useRef)(null);!function(e,t,r,...a){const n=(0,c.U0)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[a]);(0,i.useLayoutEffect)(n,[n]),(0,ji.w)({refOrElement:r,observeOnly:"width",onResize:n})}(w,(0,i.useMemo)((()=>({get current(){return v.current?.firstElementChild instanceof HTMLElement?v.current?.firstElementChild:null}})),[]),S,a,f);const I=(0,d.NC)(z.AEN),R=(0,Un.A)(),P=!s||t&&s;return(0,C.jsxs)("header",{className:n()(Hn,{[Wn]:R,[qn]:s}),ref:S,children:[!s&&(0,C.jsx)(Rl,{}),(0,C.jsxs)("div",{className:n()(Xn,{[Kn]:s}),children:[(0,C.jsxs)("div",{className:n()(Yn,{[Kn]:s}),children:[(0,C.jsx)(tl,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory({identifier:""})}),r&&(0,C.jsx)(ul,{handleNavigateBack:x,parentFolderUri:r,spec:l.folderBackButtonFactory()}),f&&(0,C.jsx)(fl,{folderUri:r,folderName:a,folderMenu:b,onRename:y,spec:l.folderTitleFactory(),className:h?e:void 0,ref:v},r)]}),P&&(0,C.jsx)("span",{ref:w,children:(0,C.jsx)(ll,{className:n()(Gn,Jn),folderUri:r,tooltipPlacement:s?"right":void 0,spec:l.createMenuButtonFactory()})}),r&&!s&&(0,C.jsx)(ml,{folderName:a,folderMenu:b,dropTargetClassName:e}),u===Ue.fX.EXPANDED&&!I&&(0,C.jsx)(hl,{dropTargetClassName:e,spec:l.viewDensityToggleFactory({identifier:""})}),(u===Ue.fX.DEFAULT&&p||u===Ue.fX.EXPANDED)&&(0,C.jsx)(cl,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory({identifier:""})})]})]})};var Tl=r(44514),jl=r(27790),Al=r(81794);const Dl=({date:e})=>(0,C.jsx)(Re.E,{variant:"bodySmall",semanticColor:"textSubdued",className:At,children:e&&b.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),Ll=e=>{const t=e.handleNavigate,r=(0,C.jsx)(Wr,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,C.jsx)(Cr,{})),a=(0,C.jsx)(Ar,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(di.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsxs)(C.Fragment,{children:[e.shouldShowType&&si(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),n=e.logRightClick,l=(0,C.jsx)(g.h,{menu:e.menu,onShow:n,children:(0,C.jsx)(Sr.E,{uri:e.uri,trigger:Sr.l.OnMouseDown,children:(0,C.jsx)(jl.v,{className:bt,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:br.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})});return(0,ur.c0)(e.uri)?(0,C.jsx)(vr.cW,{parentRef:e.parentRef,children:l}):l},El=e=>{const t=e.handleNavigate,r=(0,C.jsx)(Wr,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,C.jsx)(Ar,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(di.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsxs)(C.Fragment,{children:[e.shouldShowType&&si(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),a=e.logRightClick;return(0,C.jsx)(Rr,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,C.jsxs)("div",{children:[(0,C.jsx)(g.h,{menu:e.menu,onShow:a,children:(0,C.jsx)(Sr.E,{uri:e.uri,trigger:Sr.l.OnMouseDown,children:(0,C.jsx)(jl.v,{className:n()(bt,ft),media:e.cover,id:e.uri,padding:br.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,C.jsxs)("span",{className:Nt,children:[r," ",i]})]})})},Ol=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,C.jsx)(g.h,{menu:e.menu,onShow:r,children:(0,C.jsxs)("div",{className:jt,ref:t,children:[(0,C.jsx)(Ll,{...e,parentRef:t}),(0,C.jsx)(Dl,{date:e.addedAt}),(0,C.jsx)(Dl,{date:e.lastPlayedAt})]})})},kl=e=>{const t=e.handleNavigate,r=(0,C.jsxs)("div",{className:Et,children:[(0,C.jsx)(Wr,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Al.v,{children:"•"}),(0,C.jsx)(Al.v,{lineClamp:1,children:si(e.type)})]}),(!e.shouldShowType&&e.type===li.c.ALBUM||(0,ur.c0)(e.uri))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Al.v,{children:"•"}),(0,C.jsx)(Ar,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,C.jsx)(di.g,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,C.jsx)(Cr,{iconSize:"xsmall"}):(0,C.jsxs)(C.Fragment,{children:[e.downloadButton&&(0,C.jsx)("div",{className:vt,children:e.downloadButton}),e.preReleaseIcon&&(0,C.jsx)("div",{className:vt,children:e.preReleaseIcon}),e.lockedIcon&&(0,C.jsx)("div",{className:vt,children:e.lockedIcon})]})),l=e.logRightClick;return(0,C.jsx)(g.h,{menu:e.menu,onShow:l,children:(0,C.jsx)(Sr.E,{uri:e.uri,trigger:Sr.l.OnMouseDown,children:(0,C.jsx)(jl.v,{className:n()(bt,ht),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${br.vw} ${br.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},Nl=e=>{const t=e.logRightClick;return(0,C.jsx)(g.h,{menu:e.menu,onShow:t,children:(0,C.jsxs)("div",{className:jt,children:[(0,C.jsx)(kl,{...e}),(0,C.jsx)(Dl,{date:e.addedAt}),(0,C.jsx)(Dl,{date:e.lastPlayedAt})]})})},Fl=({height:e,isCompact:t,primaryFilter:r})=>(0,C.jsx)(Oi.c,{className:n()({[It]:!t,[Pt]:t,[Rt]:r===li.c.ARTIST}),style:{height:e}});let Bl=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const Ml=()=>{const[e,t]=(0,ve.x)("library-row-mode",Bl.DEFAULT),r=(0,Ue.vW)();return{libraryRowMode:e,setLibraryRowMode:t,rowHeight:e===Bl.DEFAULT||r===Ue.fX.COLLAPSED?64:32}};var Ul=r(67934);const Vl=(0,i.memo)((function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n}){const l={shouldShowType:!(0,ur.c0)(e.uri)&&ci(e.type)!==t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n},o=(0,d.NC)(z.lDH),s=(0,d.NC)(z.H8e);switch(e.type){case li.c.FOLDER:return(0,C.jsx)(Ia,{libraryItem:e,...l});case li.c.ALBUM:return(0,C.jsx)(_i,{libraryItem:e,...l});case li.c.ARTIST:return(0,C.jsx)(Xi,{libraryItem:e,...l});case li.c.AUDIOBOOK:return(0,C.jsx)(Zi,{libraryItem:e,...l});case li.c.SHOW:return(0,C.jsx)(In,{libraryItem:e,...l});case li.c.PLAYLIST:return(0,C.jsx)(pn,{libraryItem:e,...l});case li.c.LIKED_SONGS:return(0,C.jsx)(La,{libraryItem:e,...l});case li.c.YOUR_EPISODES:return(0,C.jsx)(jn,{libraryItem:e,...l});case li.c.LOCAL_FILES:return(0,C.jsx)(Ma,{libraryItem:e,...l});case li.c.PRE_RELEASE_ALBUM:return o?(0,C.jsx)(Sn,{libraryItem:e,...l}):null;case li.c.PRE_RELEASE_BOOK:return s?(0,C.jsx)(Sn,{libraryItem:e,...l}):null;default:(0,oi.d)(e)}})),_l=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const l=(0,Ue.vW)(),{rowHeight:o,libraryRowMode:s}=Ml(),c=s===Bl.COMPACT,d=((e,t)=>{switch(e){case Ue.fX.COLLAPSED:return El;case Ue.fX.DEFAULT:return t?kl:Ll;case Ue.fX.EXPANDED:return t?Nl:Ol;default:(0,oi.d)(e)}})(l,c),u=(0,i.useCallback)(((e,t)=>(0,C.jsx)(Fl,{height:e,isCompact:c,primaryFilter:r},t)),[c,r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>e?(0,C.jsx)(Vl,{item:e,spec:n,RowVariantComponent:d,primaryFilter:r,nrValidItems:a,index:t+i},e.uri):u(`${o}px`,`${t+i}`)))),[d,e,r,u,o,n,a]);return(0,C.jsx)(Tl.$,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":b.Ru.get("web-player.your-library-x.your-library"),children:(0,C.jsx)(Ul.L,{renderRows:p,nrRows:a,rowHeight:o,scrollNodeRef:t,renderPlaceholder:u})})},Hl="aYmHu0jEKnESRGVwWKTv";function Wl(){return(0,C.jsx)("div",{"data-popper-arrow":"",className:Hl})}var zl=r(56672);const Xl="MRzne1iuLfbh7KEwhHOk";function Kl({onClick:e}){return(0,C.jsx)(Fe.H,{size:"small",onClick:e,iconOnly:zl.M,"aria-label":b.Ru.get("close"),className:Xl})}const Yl="dixACKl18S755OnSdpna",Gl=(0,i.forwardRef)((({onClose:e,children:t,shouldCloseOnEscapePress:r=!0,colorSet:a="encore-announcement-set",maxWidth:l=180},o)=>((0,i.useEffect)((()=>{const t=t=>{r&&"Escape"===t.key&&e()};return window.addEventListener("keydown",t,!0),()=>{window.removeEventListener("keydown",t,!0)}}),[r,e]),(0,C.jsxs)("div",{ref:o,className:n()(a,Yl),style:{maxWidth:`${l}px`},children:[t,(0,C.jsx)(Kl,{onClick:e}),(0,C.jsx)(Wl,{})]}))));var Zl=r(3956),Jl=r(16649);function ql({children:e,content:t,offset:r,placement:a,isVisible:n}){const l=(0,i.useRef)(null),o=(0,d.NC)(z.zJD),s=n&&o,c=(0,i.useRef)(null);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{role:"presentation",ref:l,children:e}),s&&(0,C.jsx)(Zl.Ay,{visible:!0,interactive:!0,aria:{expanded:!0},arrow:!0,placement:a,offset:r,appendTo:Jl.D,reference:l,onShow:e=>{e.reference.setAttribute("data-open","true")},onHide:e=>{e.reference.removeAttribute("data-open")},render:e=>(0,C.jsx)("div",{ref:c,"data-placement":e["data-placement"],"data-testid":"popover",children:t}),popperOptions:{modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport",altAxis:!0,padding:10,tether:!1}},{name:"arrow",options:{padding:10}}]}})]})}const Ql=(e,t)=>{const{notifyShowInterest:r,notifyHideInterest:a,events:n}=(0,i.useContext)(ne);return{events:n,notifyShowInterest:(0,i.useCallback)((()=>{r(e,t)}),[e,r,t]),notifyHideInterest:(0,i.useCallback)((()=>{a(e,t)}),[e,a,t])}};var $l=r(33974);function eo({children:e,content:t,itemKey:r,priority:a,offset:n,placement:l,isInterestedInBeingShown:o,onVisibilityDenied:s,onVisibilityGranted:c}){const{isVisible:d}=function(e,t,r){const a=t.isInterestedInBeingShown,n=()=>{},l=(0,$l.A)(t.onVisibilityGranted??n),o=(0,$l.A)(t.onVisibilityDenied??n),[s,c]=(0,i.useState)(!1),{notifyShowInterest:d,notifyHideInterest:u,events:p}=Ql(e,r);return(0,i.useEffect)((()=>{const t=p.addListener(ie.VISIBILITY_GRANTED,(t=>{t.data.key===e&&(l(),c(!0))})),r=p.addListener(ie.VISIBILITY_DENIED,(t=>{t.data.key===e&&(o(),c(!1))}));return()=>{t(),r()}}),[p,e,l,o]),(0,i.useEffect)((()=>{a?d():u()}),[u,d,a]),(0,i.useEffect)((()=>u),[u]),{isVisible:s}}(r,{isInterestedInBeingShown:o,onVisibilityDenied:s,onVisibilityGranted:c},a);return(0,C.jsx)(ql,{content:t,isVisible:d,offset:n,placement:l,children:e})}var to=r(93821),ro=r(81223),io=r(81114),ao=r(47653),no=r(1769);const lo=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),a=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===no.O.UP){const r=a?.[a.length-1],n=e.previousElementSibling,l=i?.previousElementSibling?.previousElementSibling;if(t instanceof HTMLUListElement||!l){if(n&&n instanceof HTMLUListElement)return n;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:a?.[0]}}},oo="GvHaMehoYEIaLhHafB4F",so="ijaSPbJ8wd3RNiyukjlh",co="w0nWe_59HwsG7nQLoibF",uo="LbAtRPub21imosz1Xjht",po=[{itemsViewState:bl.X.LIST,compactModeState:Bl.COMPACT},{itemsViewState:bl.X.LIST,compactModeState:Bl.DEFAULT},{itemsViewState:bl.X.GRID,compactModeState:Bl.DEFAULT}],go=(e,t,r)=>Math.round((e+t)*r)/r,mo=e=>e.itemsViewState===bl.X.GRID?b.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===Bl.COMPACT?b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"):b.Ru.get("web-player.your-library-x.sort-and-view-picker.list"),yo=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:a,sortOptions:n,spec:l,id:o})=>{const s=(0,w.s)(),c=(0,i.useCallback)((e=>e.itemsViewState===bl.X.GRID?(0,C.jsx)(xl.D,{size:"small"}):e.compactModeState===Bl.COMPACT?(0,C.jsx)(ro.d,{size:"small"}):(0,C.jsx)(yl.N,{size:"small"})),[]),{gridScale:d,setGridScale:u}=Dn(),p=e=>{const t=go(e,.5,100);u(t),s.logInteraction(l.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},g=(0,i.useCallback)((e=>{u(e),s.logInteraction(l.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[s,u,l]),y=e=>e?.parentElement?.querySelector("ul"),x=(0,i.useRef)(null);return(0,C.jsxs)("div",{id:o,className:so,ref:x,children:[(0,C.jsxs)(m.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:lo,getInitialFocusElement:y,children:[(0,C.jsx)(io.y,{children:b.Ru.get("web-player.your-library-x.sort_by")}),n.map((({key:t,value:i},a)=>(0,C.jsx)(h.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,a),divider:a===n.length-1?"after":void 0,autoClose:!1,children:i},t)))]}),(0,C.jsxs)(m.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:lo,getInitialFocusElement:y,children:[(0,C.jsx)(io.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),po.map((e=>{const r=mo(e),i=e.itemsViewState===t.itemsViewState&&e.compactModeState===t.compactModeState;return(0,C.jsx)(h.D,{role:"menuitemradio","aria-checked":i,onClick:()=>a(e),leadingIcon:c(e),autoClose:!1,children:r},r)})),bl.X.GRID===t.itemsViewState&&(0,C.jsx)("li",{role:"presentation",children:(0,C.jsx)("div",{role:"menuitem",className:uo,children:(0,C.jsx)(ao.z2,{labelText:b.Ru.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:go(d,-.5,100),max:1,step:.1,onDragStart:p,onDragMove:p,onDragEnd:p,onStepBackward:()=>g(go(d,-.1,10)),onStepForward:()=>g(go(d,.1,10)),forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})},xo=(e,t=!0)=>{const[r,a]=(0,ve.x)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,ve.x)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[o,s]=(0,i.useState)(!1),{dropOriginIsYLX:c}=qr(),{draggingIsInProgress:d}=(0,i.useContext)(k.O_);(0,i.useEffect)((()=>{d&&c&&s(!0)}),[d,c]);const u=(0,i.useCallback)((()=>{a(!0),s(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||o)&&(t||o),onHide:u}};var bo=r(68802);const ho=({sortOptions:e,selectedSort:t,onSortSelect:r,showReorderingOnboarding:a,scrollNodeRef:n,spec:l})=>{const{itemsView:o,setItemsView:s}=(0,bl.t)(),{libraryRowMode:c,setLibraryRowMode:d}=Ml(),u=(0,w.s)(),p=(0,i.useCallback)((()=>{u.logInteraction(l.hitUiReveal())}),[u,l]),g=(0,i.useMemo)((()=>o===bl.X.GRID?{itemsViewState:bl.X.GRID,compactModeState:Bl.DEFAULT}:c===Bl.COMPACT?{itemsViewState:bl.X.LIST,compactModeState:Bl.COMPACT}:{itemsViewState:bl.X.LIST,compactModeState:Bl.DEFAULT}),[o,c]),m=(0,i.useCallback)((e=>{let t=l.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===bl.X.GRID?s(bl.X.GRID):e.compactModeState===Bl.COMPACT?(t=l.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),s(bl.X.LIST),d(Bl.COMPACT)):(t=l.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),s(bl.X.LIST),d(Bl.DEFAULT)),u.logInteraction(t)}),[u,s,d,l]),y=(0,i.useRef)(null),x=(0,bo.y)(n,"0px 0px 0px 0px",.75,y),[h,f]=(0,ve.x)("sort-view-picker-onboarding-seen",!1),{show:S,onHide:v}=xo(a,!x),I=(0,i.useCallback)((()=>{p(),f(!0)}),[p,f]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(eo,{isInterestedInBeingShown:!h&&!x,itemKey:$.YLX_SORT_AND_VIEW_PICKER,priority:ee.DEFAULT,placement:"right",content:(0,C.jsx)(Gl,{onClose:()=>{f(!0)},children:(0,C.jsx)(Re.E,{as:"p",children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-onboarding")})}),children:(0,C.jsx)(eo,{isInterestedInBeingShown:S,itemKey:$.YLX_CUSTOM_ORDERING,priority:ee.CONTEXTUAL,placement:"right",content:(0,C.jsx)(Gl,{onClose:v,children:(0,C.jsx)(Re.E,{as:"p",dangerouslySetInnerHTML:{__html:b.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text")}})}),children:(0,C.jsx)(gl.b,{menu:(0,C.jsx)(yo,{selectedSort:t,selectedView:{itemsViewState:g.itemsViewState??bl.X.LIST,compactModeState:g.compactModeState??Bl.DEFAULT},sortOptions:e,onSortSelect:r,onViewSelect:m,spec:l,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,C.jsx)(Fe.H,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",t.value,mo(g)),onClick:I,size:"small",iconTrailing:(R=g,R.itemsViewState===bl.X.GRID?xl.D:R.compactModeState===Bl.COMPACT?ro.d:yl.N),ref:y,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,C.jsx)(Re.E,{variant:"bodySmall",className:co,children:t.value})})})})})});var R},fo=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,showReorderingOnboarding:a,spec:n,scrollNodeRef:l})=>{const o=(0,i.useMemo)((()=>n.sortMenuButtonFactory()),[n]),s=(0,i.useMemo)((()=>n.sortbyViewasMenuButtonFactory()),[n]),c=(0,w.s)(),u=(0,Ht.f)(),p=e.find((e=>e.id===t))??e?.at(0),g=(0,i.useRef)(null),m=(0,d.NC)(z.AEN),y=(0,i.useCallback)(((e,t)=>{r(e);const i=u.getSortOrderLabel(e);m?c.logInteraction(s.sortOptionFactory({identifier:i,position:t}).hitSort()):c.logInteraction(o.sortMenuFactory().sortOptionFactory({identifier:i,position:t}).hitSort())}),[u,c,r,s,o,m]),{show:x,onHide:h}=xo(a);return m?(0,C.jsx)(ho,{sortOptions:e.map((({id:e,name:t})=>({key:e,value:t}))),selectedSort:{key:p?.id??"",value:p?.name??""},onSortSelect:y,showReorderingOnboarding:a,scrollNodeRef:l,spec:s}):(0,C.jsx)("div",{className:oo,ref:g,children:(0,C.jsx)(eo,{isInterestedInBeingShown:x,itemKey:$.YLX_CUSTOM_ORDERING,priority:ee.CONTEXTUAL,placement:"right",content:(0,C.jsx)(Gl,{onClose:h,children:(0,C.jsx)(Re.E,{as:"p",dangerouslySetInnerHTML:{__html:b.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text")}})}),children:(0,C.jsx)(to.g,{options:e.map((({id:e,name:t})=>({key:e,value:t}))),onClick:()=>{c.logInteraction(o.hitUiReveal())},onSelect:y,selected:{key:p?.id??"",value:p?.name??""},heading:b.Ru.get("web-player.your-library-x.sort_by"),ariaLabel:b.Ru.get("web-player.your-library-x.sort_by")})})})};var So=r(37745),vo=r(91724),wo=r(16902);const Co=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r})=>{const a=(0,Ht.f)(),n=(0,w.s)(),l=function(e){switch(e){case li.c.PRE_RELEASE_ALBUM:case li.c.ALBUM:return b.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case li.c.ARTIST:return b.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case li.c.PLAYLIST:return b.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case li.c.SHOW:return b.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case li.c.PRE_RELEASE_BOOK:case li.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return b.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return b.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,oi.k)(e)}}(t),o=(0,i.useCallback)((()=>(n.logInteraction(r.searchButtonFactory().hitUiReveal()),!0)),[n,r]),s=(0,i.useCallback)((()=>(n.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0)),[n,r]);return(0,C.jsx)(So.S,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:a?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:o,onClear:s,useExpandCallback:e=>{(0,wo.f)(vo.gO.FOCUS_YLX_TEXT_FILTER,e)}})};var Io=r(29670);var Ro=r(9773);var Po=r(68385);function To(){const[e,t]=(0,i.useState)(null);if((0,ya.l)(ma.UV.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===e?.reason)return null;switch(e.reason){case ma.uL.TOO_MANY_PINS:return(0,C.jsx)(Po.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.title"),message:b.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case ma.uL.NO_PIN_IN_FOLDER:return(0,C.jsx)(Po.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,oi.k)(e),null}}var jo=r(21053),Ao=r(19218);var Do=r(89335),Lo=r(6061),Eo=r(47253),Oo=r(64970);const ko=(e,t,r,a,n)=>{const l=(0,Oo.x)(),o=(0,i.useRef)(r),s=(0,i.useRef)(),c=(0,i.useRef)();s.current=a,c.current=n,(0,i.useEffect)((()=>{const r={ident:e,isPrefix:t,onMessage:e=>o.current(e),onSubscribe:async e=>await(s.current?.(e)),onCancel:async e=>await(c.current?.(e))},i=l.subscribe(r);return()=>{i.cancel()}}),[e,t,l])},No={[ma.Ir.ALBUMS]:li.c.ALBUM,[ma.Ir.ARTISTS]:li.c.ARTIST,[ma.Ir.BOOKS]:li.c.AUDIOBOOK,[ma.Ir.EPISODES]:li.c.EPISODE,[ma.Ir.SHOWS]:li.c.SHOW,[ma.Ir.TRACKS]:li.c.TRACK};function Fo(e,t){const r=(0,i.useCallback)((({data:{list:r}})=>{Bo(e,No[r])&&t()}),[e,t]);(0,ya.l)(ma.UV.UPDATE,r),(0,ya.l)(ma.UV.UPDATE_PIN,t);const a=(0,i.useCallback)((()=>{Bo(e,li.c.PLAYLIST)&&t()}),[e,t]);(0,ha.L)(a),function(e){ko("hm://collection/ylpin/",!0,e)}(t),function(e){const t=(0,Eo.A)(),r=t.getEvents();(0,i.useEffect)((()=>r.addListener(Lo.T.UPDATE,e)),[t,r,e])}(t),function(e){const t=(0,Do.l)().getEvents();(0,i.useEffect)((()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(ce.ar.ADDED,r),t.addListener(ce.ar.REMOVED,r),()=>{t.removeListener(ce.ar.ADDED,r),t.removeListener(ce.ar.REMOVED,r)}}),[e,t])}(t)}function Bo(e,t){switch(e){case li.c.ALBUM:case li.c.ARTIST:case li.c.AUDIOBOOK:case li.c.SHOW:return e===t;case li.c.PLAYLIST:switch(t){case li.c.TRACK:case li.c.PLAYLIST:case li.c.EPISODE:return!0;default:return!1}default:return!0}}var Mo=r(58190),Uo=r(72135),Vo=r(20435);const _o="Vf3ww2_My5QuwUnbpzhu";var Ho=r(17026);const Wo=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(Mr);return e?(0,C.jsx)(Ho.qb,{className:_o,children:e}):null};var zo=r(50631);const Xo="main-yourLibraryX-libraryContainer",Ko="main-yourLibraryX-libraryFilter",Yo="iwhVJuPipY1lrQIjaA1k",Go="main-yourLibraryX-libraryItemContainer",Zo="main-yourLibraryX-libraryRootlist",Jo="sikBfynL1Y6I25nVpbAg",qo="KwShd3RdVrsX6dGLJNxT",Qo="qOtD4rsRpIMhQLCjJ4K3",$o="oEDH8yMQOKQNoX7LWjwt",es="RHRitk6QC3rvuG24RAdj",ts="main-yourLibraryX-filterArea",rs={items:[],totalLength:0},is=()=>{const{filter:e}=(0,i.useContext)(Q.g),[t,r]=(0,i.useState)(null),{refinersPickedByUserRef:a,selectedRefinerIds:o,resetRefinerIds:m,resetAndToggleRootRefiner:y,toggleRefinerId:x}=function(e){const{openedFolderUri:t=or,change:r,resetFolder:a}=(0,i.useContext)(sr),n=(0,i.useRef)(t),[l,o]=(0,ve.x)("ylx-active-filter-ids",{[t]:[]}),s=(0,i.useRef)(!0),d=(0,c.U0)(((r,i=!0)=>{const a=new Set(e);a.has(r)?a.delete(r):a.add(r),s.current=i,o({...l,[t]:Array.from(a)})}),[e,o,t]),u=(0,i.useCallback)((()=>o({...l,[t]:[]})),[t,l,o]),p=(0,i.useCallback)((e=>{t&&a(),o({...l,[or]:e?[e]:[]})}),[t,a,l,o]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==or&&"PUSH"===r&&o({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,o]),{refinersPickedByUserRef:s,selectedRefinerIds:l[t],resetRefinerIds:u,resetAndToggleRootRefiner:p,toggleRefinerId:d}}(t?.selectedFilters?.map((e=>e.id))??[]),b=o?.[0],{selectedSortOrderId:h,setSelectedSortOrderId:f}=function(e){const t=(0,Ht.f)().getContentsPrimaryFilterId(li.c.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(sr),[a,n]=(0,ve.x)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(b),S=(0,i.useRef)(null),v=(0,i.useRef)(null),I=(0,i.useRef)(null),{expandedFolders:R}=function(){const e=(0,i.useContext)(yt);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:T,resetFolder:E}=(0,i.useContext)(sr),F=(0,Mo.p)(),B=(0,de.P)(),M=(0,Ht.f)(),U=(0,Qr.g)(),V=Ce(),_=$r(),[H,W]=(0,i.useState)(!1),{isCollapsed:X,isExpanded:K,setYlxSidebarState:Y}=(0,Ue.$)();(e=>{const t=(0,Ht.f)(),{isCollapsed:r,setYlxSidebarState:a,lastUncollapsedYlxSidebarState:n}=(0,Ue.$)(),l=(0,Ao.W)(),o=(0,i.useCallback)((()=>{const e=r?n:Ue.fX.COLLAPSED;a(e)}),[r,n,a]),s=(0,i.useCallback)((()=>{e(null),r&&a(n)}),[r,n,e,a]),c=(0,i.useCallback)((i=>()=>{e(t.getContentsPrimaryFilterId(i)),r&&a(n)}),[r,n,t,e,a]),d=c(li.c.PLAYLIST),u=c(li.c.SHOW),p=c(li.c.ARTIST),g=c(li.c.ALBUM),m=c(li.c.AUDIOBOOK);(0,jo.Nx)(l?vo.gO.TOGGLE_NPV_SIDEBAR:vo.gO.TOGGLE_YLX_SIDEBAR,o),(0,jo.Nx)(vo.gO.GO_TO_LIBRARY,s),(0,jo.Nx)(vo.gO.GO_TO_PLAYLISTS,d),(0,jo.Nx)(vo.gO.GO_TO_PODCASTS,u),(0,jo.Nx)(vo.gO.GO_TO_ARTISTS,p),(0,jo.Nx)(vo.gO.GO_TO_ALBUMS,g),(0,jo.Nx)(vo.gO.GO_TO_AUDIOBOOKS,m)})(y);const{isGridView:G}=(0,bl.t)(),{libraryRowMode:Z}=Ml(),J=Z===Bl.COMPACT,{spec:$,UBIFragment:ee}=(0,_e.r)(u.j,{data:{identifier:"yourlibraryx"}});let te;te=X?"collapsed":G?K?"expanded_grid":"default_grid":J?K?"expanded_compact":"default_compact":K?"expanded_list":"default_list";const re=(0,i.useMemo)((()=>$.sidebarFactory({uri:T??or,identifier:te})),[$,T,te]),ie=(0,zo.t)(re),ae=(0,i.useMemo)((()=>re.headerFactory()),[re]),ne=(0,i.useMemo)((()=>ae.filtersFactory()),[ae]),le=(0,i.useMemo)((()=>ae.searchBarFactory()),[ae]),oe=(0,i.useMemo)((()=>re.listFactory()),[re]),se=(0,w.s)();!function(e=[],t=[],r){const a=(0,Io.n)(),n=(0,Ht.f)().getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const o=(0,i.useRef)(t);o.current=t;const s=(0,i.useRef)(r);s.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=o.current.includes(n),t=l.current.includes(n),r=o.current.length>1,i=!a&&!r&&!e&&t,c=a&&e&&d.current;(i||c)&&(i&&(d.current=!0),s.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,c.Ij)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&d.current||(d.current=!1),u.current=t)}),[n,t])}(t?.availableFilters?.map((e=>e.id)),t?.selectedFilters?.map((e=>e.id)),x);const{handleDropOnFolder:ce,unpinConfirmationDialog:ue}=pa(oe,T),{dropOriginIsYLX:ge,entityIsInFolder:be}=qr(),{setDraggingIsInProgress:he}=(0,i.useContext)(k.O_);(0,N.g)(S);const fe=T?er:$t,Se=be&&!t?.reorderAllowed?[A.fl.PLAYLISTS_V2,A.fl.FOLDERS]:[],{dropPosition:Ie,className:Re,...Pe}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:ge?Se:fe},onDrop:(0,i.useCallback)((async e=>{if(T)ce(e);else{const{[A.fl.TRACKS]:t=[],[A.fl.LOCAL_TRACKS]:r=[],[A.fl.ALBUMS]:i,[A.fl.ARTISTS]:a,[A.fl.EPISODES]:n,[A.fl.SHOWS]:l,[A.fl.PLAYLISTS_V2]:o=[],[A.fl.FOLDERS]:s,[A.fl.AUDIOBOOKS]:c}=e,d=[...t,...r];d.length&&(M?.add({uris:d}),se.logInteraction(oe.dragCreatePlaylist())),i?.length&&(M?.add({uris:i}),se.logInteraction(oe.dragLike({itemToBeLiked:i.at(0)??""}))),a?.length&&(M?.add({uris:a}),se.logInteraction(oe.dragLike({itemToBeLiked:a.at(0)??""}))),n?.length&&(M?.add({uris:n}),se.logInteraction(oe.dragLike({itemToBeLiked:n.at(0)??""}))),l?.length&&(M?.add({uris:l}),se.logInteraction(oe.dragLike({itemToBeLiked:l.at(0)??""}))),c?.length&&(M?.add({uris:c}),se.logInteraction(oe.dragLike({itemToBeLiked:c.at(0)??""}))),o.length&&(_(o,{before:"start"}),ge?se.logInteraction(oe.dragSort()):se.logInteraction(oe.dragLike({itemToBeLiked:o.at(0)??""}))),s?.length&&(U.moveFolder({uri:s[0]},{before:"start"}),se.logInteraction(oe.dragSort()))}}),[T,ce,M,se,oe,_,ge,U]),onLongDragOver:(0,i.useCallback)((()=>{X&&Y(Ue.fX.DEFAULT)}),[X,Y])}),Te=(0,d.NC)(z.H8e),je=(0,d.NC)(z.lDH),Ae=Te||je,De=(0,i.useMemo)((()=>({filters:o,sortOrder:h,textFilter:e,includeLocalFiles:B,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:Ae,expandedFolders:X||G?[]:R,filtersPickedByUser:a.current,folderUri:T})),[o,h,e,B,Ae,X,G,R,a,T]),Le=(0,i.useCallback)((async(e,t)=>{try{const i=await M.getContents({offset:e,limit:t,...De}),{offset:a,limit:n,items:o,...s}=i;return W(!1),{fetchedId:De.folderUri,onCacheSuccess:()=>{r((e=>(0,l.j)(s,e)?e:s))},...i}}catch(e){return e instanceof P.c_?(m(),rs):e instanceof P.IU?(f(void 0),rs):e instanceof P.db?(E(),rs):((0,Vo.UD)(e),W(!0),rs)}}),[De,M,m,E,f]),Ee=!1===t?.hasUnfilteredItems,Oe=t?.hasTextFilter&&0===t.totalLength&&""!==e,{setFilter:ke}=(0,i.useContext)(Q.g);(0,i.useEffect)((()=>{Oe&&X&&ke("")}),[Oe,X,ke]);const Ne=0===t?.totalLength&&t.selectedFilters.length>0&&!t.passedFolderUri&&!t.hasTextFilter;(0,c.Ij)((()=>{const e=t?.selectedFilters.at(-1);Ne&&e&&x(e.id,!1)}),[Ne,t?.selectedFilters]);const Fe=(0,d.NC)(z.HbK,{loadingValue:!1})&&M?.getCapabilities().canFetchAllItems,{fetchedId:Be,getItems:Me,nrValidItems:Ve,invalidateCache:He}=(0,Uo.E)({nrItems:50,fetch:Le,limit:50,cacheAllOnInvalidation:Fe,cacheAllLimit:5e4}),We=(0,s.YQ)(He,200,{leading:!0,trailing:!0,maxWait:1e3});Fo(t?.primaryFilter,We);const ze=!T&&!Be||T===Be;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}}),[e,t])})(S,Be);const Ke=(0,i.useCallback)((()=>{He(),W(!1)}),[He]),Ye=(0,bo.y)(S),Ze=!!t?.openedFolderName,Je=(0,d.NC)(z._p8,{loadingValue:!1})&&Fe,qe=function(e,t,r){const{isGridView:a}=(0,bl.t)(),{rowHeight:n}=Ml();return(0,i.useCallback)((async i=>{let l=n,o=1;if(a){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(o=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const s=r(0,5e4,{cachedOnly:!0}),c=s.find((e=>e?.name&&(0,Ro.u)(i,e.name))),d=c?s.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/o)*l,l),c?.uri??null}),[e,t,n,r,a])}(I,S,Me),Qe=H?(0,C.jsx)(mt,{onClick:Ke}):null;let $e;(0,i.useEffect)((()=>{H&&X&&Y(Ue.fX.DEFAULT)}),[H,X,Y]),Ee&&!X&&($e=Ze?(0,C.jsx)(Ge,{className:Re}):(0,C.jsx)(nt,{className:Re}));const et=Oe?(0,C.jsx)(dt,{query:e,className:Re}):null,tt=(0,d.NC)(z.AEN),rt=!X&&!$e&&(0,C.jsxs)("div",{className:n()(Ko,Re,{[Yo]:tt}),children:[(0,C.jsx)(Co,{clearOnEscapeInElementRef:v,primaryFilter:t?.primaryFilter,spec:le},T),(0,C.jsx)(fo,{sortOrders:t?.availableSortOrders??[],activeSortOrderId:t?.selectedSortOrder?.id,setActiveSortOrderId:f,showReorderingOnboarding:t?.primaryFilter===li.c.PLAYLIST&&!t?.reorderAllowed,spec:ae,scrollNodeRef:S})]}),it=H&&!t,at=K&&!G&&!Qe&&!$e,lt=(t?.selectedFilters??[]).length>0,ot=V&&!lt&&!T&&!Ee,{cheetaraOnboardingIsActive:st,setCheetaraOnboardingIsActive:ct,cheetaraOnboardingDismissed:ut,setCheetaraOnboardingDismissed:pt,handleCloseCheetaraOnboarding:gt}=we(),xt=!X&&V&&!H&&!ut&&!t?.passedFolderUri&&!!t?.availableFilters?.length&&!t?.selectedFilters?.length;return(0,C.jsx)(Ur,{containerRef:v,findMatchingTypeaheadUid:qe,isEnabled:Je,children:(0,C.jsxs)(ee,{spec:$,children:[(0,C.jsx)(q,{}),st&&(0,C.jsx)(ye,{onClose:gt}),(0,C.jsx)(g.h,{menu:(0,C.jsx)(j,{folderUri:T}),children:(0,C.jsxs)("div",{className:n()(Xo,{[Wt]:Ie===D.Nz.ON,[Jo]:X,[$o]:st}),style:{"--placeholder-image":`url(${(0,p.b)("images/ylx-row-placeholder.png")})`,"--placeholder-artist-image":`url(${(0,p.b)("images/ylx-artist-row-placeholder.png")})`,"--placeholder-compact-image":`url(${(0,p.b)("images/ylx-compact-row-placeholder.png")})`},ref:e=>{v.current=e,ie(e)},...Pe,tabIndex:-1,onDragStart:()=>he(!0),onDragEnd:()=>he(!1),children:[ue,(0,C.jsxs)("div",{className:n()({[es]:Ye}),children:[(0,C.jsx)(Pl,{parentDropTargetClassName:Re,isLibraryCompletelyEmpty:Ee,folderUri:t?.passedFolderUri,folderName:t?.openedFolderName,spec:ae.titleRowFactory(),openedFolderIsPlayable:t?.openedFolderIsPlayable}),!F&&(0,C.jsx)(ee,{spec:ae,children:(0,C.jsx)(Xe,{})}),!X&&!it&&(0,C.jsxs)("div",{className:ts,children:[ot&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(xe,{})}),(0,C.jsx)(lr,{selectedFilters:t?.selectedFilters,availableFilters:t?.availableFilters,toggleFilterId:x,resetFilterIds:m,className:n()({[Qo]:!ze}),scrollNodeRef:S,spec:ne,inFolderView:!!t?.passedFolderUri},Be),K&&rt]}),xt&&K&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(me,{ylxIsExpanded:K,setCheetaraOnboardingIsActive:ct,onHide:()=>pt(!0)})}),at&&(0,C.jsx)(Ft,{isScrolled:Ye})]}),(0,C.jsx)(O.a,{className:Go,onInstanceCreated:e=>{S.current=e.elements().viewport},children:(0,C.jsxs)("div",{className:n()(Zo,{[Qo]:!H&&!ze,[Jo]:X,[qo]:at}),children:[xt&&!K&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(me,{ylxIsExpanded:K,setCheetaraOnboardingIsActive:ct,onHide:()=>pt(!0)})}),!K&&rt,!X&&t?.tagPlaylist&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(pe,{playlist:t.tagPlaylist})}),Qe||$e||et,(0,C.jsx)("div",{ref:I,children:G?(0,C.jsx)(Mn,{getItems:Me,scrollNodeRef:S,primaryFilter:t?.primaryFilter,nrValidItems:Ve,spec:oe}):(0,C.jsx)(_l,{getItems:Me,scrollNodeRef:S,primaryFilter:t?.primaryFilter,nrValidItems:Ve,spec:oe})})]})}),To(),(0,C.jsx)(Wo,{})]})})]})})},as=()=>{const{isAnonymous:e}=(0,o.d4)((e=>e.session)),t=(0,o.d4)((e=>e.ui.editRefinersModal)),r=Ce();return(0,C.jsx)(E.s,{onError:e=>{(0,Vo.Jy)(e,"YourLibraryX")},children:(0,C.jsx)(Q.s,{uri:P.gv,children:(0,C.jsx)(xt,{children:(0,C.jsxs)(cr,{children:[(0,C.jsx)(ue,{children:(0,C.jsx)(Se,{children:(0,C.jsxs)(le,{children:[(0,C.jsx)(is,{}),r&&t.isOpen&&(0,C.jsx)(ge,{})]})})}),(0,C.jsx)(ke,{isAnonymous:e})]})})})})}},35032:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(8408);function a(){return(0,i.y)()[0]}},8408:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(30758),a=r(47253);function n(){const e=(0,a.A)(),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,i.useCallback)((t=>e.setIsEnabled(t)),[e])]}},64970:(e,t,r)=>{r.d(t,{x:()=>n});var i=r(72345),a=r(259);function n(){return(0,a.N)(i.b)}}}]);
//# sourceMappingURL=2101.js.map