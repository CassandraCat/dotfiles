"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5783],{96054:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(30758),s=n(54335),i=n(80741),o=n(49839),r=n(29330),c=n(17894),l=n(94819);const d="wedRUk4eiBo9n9vqXLhU",u="hMbtEskyvMbDiwq1EScA",m="HYVIJaYYiCTgSCHie70L",g="SPbe_Q1wtiZQCmo0QKUy",v="TRp4tgG7_cymGIXDevIP",h="tC1Y_nwyyly7cpIGqF5K",p="l93AfoV_qHnMQSQBB5GK",f="DgDBmSR2sbwji2UfqxIf",x="EkGb0ZzhswreSvpZoioY";var j=n(86070);const y=(0,a.memo)((e=>{const{uri:t,title:n,imageUrl:a,date:y,subTitle:_,firstParty:k,onClick:C}=e,R=y?(0,c.l4)(y):void 0;return(0,j.jsx)(r.N,{to:t,className:d,"data-testid":"concert-card",onClick:C,children:(0,j.jsxs)("div",{className:u,children:[(0,j.jsx)(l.b,{children:(0,j.jsx)("div",{role:"img",className:x,style:{backgroundImage:`url(${a})`},children:!a&&(0,j.jsx)(s.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),R&&(0,j.jsxs)("time",{className:m,dateTime:y,children:[(0,j.jsx)(i.E,{as:"div",variant:"bodySmall",children:(0,c.tj)(R)}),(0,j.jsx)(i.E,{as:"div",variant:"bodyMediumBold",children:(0,c.Py)(R)})]}),(0,j.jsxs)("div",{className:g,dir:"auto",children:[(0,j.jsx)(i.E,{as:"h2",variant:"bodyMedium",className:v,children:n}),(0,j.jsxs)("div",{className:h,children:[k&&(0,j.jsx)("span",{className:f,children:(0,j.jsx)(o.D,{size:"small"})}),(0,j.jsx)(i.E,{as:"span",className:p,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:_})]})]})]})})}))},11515:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Vn});var a=n(30758),s=n(97500),i=n.n(s),o=n(41978),r=n(55093),c=n(69122),l=n(23920),d=n(3225),u=n(8905),m=n(8149),g=n(42382),v=n(67673),h=n(58840),p=n(83042),f=n(25394),x=n(37827),j=n(57837),y=n(95183),_=n(5318),k=n(65942),C=n(91396),R=n(84567),b=n(83975),S=n(25463),N=n(73155),I=(n(35231),n(56672)),D=n(80741),w=n(70164),U=n(70043),E=n(67017),F=n(91985),M=n(3091),B=n(17176),A=n(6924),T=n(72653),P=n(94222),z=n(96644),H=n(87584),L=n(63514),O=n(16856),K=n(77250),W=n(96132),$=n(24808),V=n(47613),Y=n(2283),G=n(88593),q=n(56708),Z=n(64416),Q=n(79494),J=n(38408),X=n(62224),ee=n(63240),te=n(45523),ne=n(10632),ae=n(54701),se=n(80675),ie=n(72861),oe=n(76804),re=n(55128),ce=n(53406),le=n(15643),de=n(1467),ue=n(24428),me=n(48199),ge=n(61845),ve=n(83536),he=n(70756),pe=n(63855),fe=n(1103),xe=n(96344),je=n(38903),ye=n(17530),_e=n(33140),ke=n(64741),Ce=n(71418),Re=n(44135),be=n(6729),Se=n(32409),Ne=n(67031),Ie=n(98045),De=n(86111),we=n(11554),Ue=n(61753),Ee=n(87318),Fe=n(89949),Me=n(22180),Be=n(85428);const Ae={af:U.af,am:E.c,ar:F.ar,arEG:M.m,arMA:B.E,arSA:A.G,az:T.az,bg:P.bg,bn:z.bn,bho:E.c,bs:H.bs,ca:L.ca,cs:O.cs,da:K.da,de:W.de,el:$.el,en:E.c,enGB:V.b,es419:Y.es,es:Y.es,esAR:Y.es,esMX:Y.es,et:G.et,eu:q.eu,fa:Z.$,fi:Q.fi,fil:E.c,frCA:J.V,fr:X.fr,gl:ee.gl,gu:te.gu,he:ne.he,hi:ae.hi,hr:se.hr,hu:ie.hu,id:oe.id,is:re.is,it:ce.it,ja:le.ja,kn:de.kn,ko:ue.ko,lt:me.lt,lv:ge.lv,mk:ve.mk,ml:E.c,mr:E.c,ms:he.ms,nb:pe.nb,ne:E.c,nl:fe.nl,or:E.c,paIN:E.c,paPK:E.c,pl:xe.pl,ptBR:je.F,ptPT:ye.pt,ro:_e.ro,ru:ke.ru,sk:Ce.sk,sl:Re.sl,sr:be.sr,sv:Se.sv,sw:E.c,ta:Ne.ta,te:Ie.te,th:De.th,tr:we.tr,uk:Ue.uk,ur:E.c,vi:Ee.vi,zhCN:Fe.g,zhHK:Me.a,zhTW:Be.G,zu:E.c},Te=e=>(e=>Object.keys(Ae).includes(e))(e)?Ae[e]:E.c;var Pe=n(12058),ze=n(42534);const He=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);return n.setDate(t.getDate()+2),{from:t,to:n}},Le=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);n.setDate(t.getDate()+7);const a=new Date(n);return a.setDate(n.getDate()+2),{from:n,to:a}},Oe=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,Pe.r)(e.from,t.from)&&(0,Pe.r)(e.to,t.to)),Ke=e=>(0,ze.x)(e,{representation:"date"});var We=n(19218),$e=n(10505),Ve=n(50631);const Ye="C1USyigFSYyc22_BmsgB",Ge="Cwo5ZgH_QLzFbSjWjglf",qe="iL7PRv0yTC9UFjHfDJDW",Ze="oxBa3kaduGMhYxc9I_Uu",Qe="x0xbkRE3CyGK_i406MSX",Je="zT6EzYpjnj9pMKhMFQB7",Xe="YOLVSXg5_gdh0VfL2oNl",et="ynXemVsankd4H506x8D2";var tt=n(86070);const nt={formatCaption:e=>p.Ru.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>p.Ru.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>p.Ru.formatDate(e,{weekday:"short"})},at=(0,a.memo)((e=>{const{onDone:t,onClose:n,spec:s}=e,[i,o]=(0,a.useState)(e.dateRange),r=(0,We.W)(),c=(0,Ve.t)(s),u=(0,$e.s)(),m=new Date,g=He(m),v=Le(m),h=Oe(i,g),f=Oe(i,v),x=new Date;return x.setFullYear(x.getFullYear()+1),(0,tt.jsx)("div",{ref:c,children:(0,tt.jsx)(w.A,{isOpen:!0,children:(0,tt.jsxs)("section",{className:Ye,children:[(0,tt.jsx)(d.H,{className:Ge,iconOnly:I.M,size:"small",onClick:n,"aria-label":p.Ru.get("close_button_action")}),(0,tt.jsxs)("div",{className:qe,children:[(0,tt.jsx)(D.E,{as:"h3",variant:"bodyMediumBold",children:p.Ru.get("live_events.date_picker_dialog_title")}),(0,tt.jsxs)("div",{className:Ze,children:[(0,tt.jsx)(S.v,{className:Qe,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{o(h?void 0:g),s&&u.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:p.Ru.get("live_events.this_weekend_preset")}),(0,tt.jsx)(S.v,{className:Qe,size:"md",selectedColorSet:"brightAccent",selected:f,onClick:()=>{o(f?void 0:v),s&&u.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:p.Ru.get("live_events.next_weekend_preset")})]})]}),(0,tt.jsx)(N.hv,{mode:"range",selected:i,onSelect:o,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,toDate:x,formatters:nt,dir:r?"rtl":"ltr",modifiersClassNames:{today:Je},locale:Te(p.Ru.getLocaleForFormatting())}),(0,tt.jsxs)("div",{className:Xe,children:[(0,tt.jsx)(d.H,{className:et,size:"small",onClick:()=>{o(void 0)},disabled:!i?.from,children:p.Ru.get("live_events.date_picker_dialog_clear")}),(0,tt.jsx)(l.$,{size:"small",onClick:()=>{if(i?.from){const{from:e,to:n}=i;t({from:e,to:n||e})}else t()},children:p.Ru.get("live_events.date_picker_dialog_done")})]})]})})})})),st=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,n,a,s]=t;return new Date(parseInt(n,10),parseInt(a,10)-1,parseInt(s,10))},it=()=>{const[e]=(0,r.ok)(),t=e.get("startDate")?.trim(),n=e.get("endDate")?.trim(),a=st(t),s=st(n);return a&&s&&{from:a,to:s}};var ot=n(17894);const rt="WnIhxhr9MIQjVvkvUQTf",ct="ETRYfT8oEUJuUDLgOBUX",lt=e=>{const[t,n]=(0,a.useState)(!1),[,s]=(0,r.ok)(),i=(0,$e.s)(),o=(0,a.useMemo)((()=>e.spec?.datePickerModalFactory()),[e.spec]),c=(0,a.useMemo)((()=>e.spec?.headerFactory()),[e.spec]),d=it(),u=He(new Date),m=Le(new Date),g=(0,a.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=Ke(e.from),t.endDate=Ke(e.to),o)){const e=new URLSearchParams(t).toString();i.logInteraction(o.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}n(!1),s(t),o&&i.logInteraction(o.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[s,o,i]),v=(0,a.useCallback)((e=>{const t={filter:"all"};Oe(d,e)||(t.startDate=Ke(e.from),t.endDate=Ke(e.to)),s(t)}),[d,s]),h=d?l.$:R.n;return(0,tt.jsxs)("div",{className:rt,children:[(0,tt.jsx)("div",{children:(0,tt.jsx)(h,{className:ct,iconLeading:b.R,onClick:()=>{n(!0),c&&i.logInteraction(c.datePickerButtonFactory().hitUiReveal())},size:"small",children:d?(0,ot.tX)(d):p.Ru.get("live_events.date_picker_button_text")})}),t&&(0,tt.jsx)(at,{onClose:()=>{n(!1),o&&i.logInteraction(o.closeButtonFactory().hitUiHide())},onDone:g,dateRange:d,spec:o}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)(S.v,{size:"sm",selectedColorSet:"brightAccent",selected:Oe(d,u),onClick:()=>{if(v(u),c){const e={startDate:Ke(u.from),endDate:Ke(u.to)},t=new URLSearchParams(e).toString();i.logInteraction(c.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},className:ct,children:p.Ru.get("live_events.this_weekend_preset")}),(0,tt.jsx)(S.v,{size:"sm",selectedColorSet:"brightAccent",selected:Oe(d,m),onClick:()=>{if(v(m),c){const e={startDate:Ke(m.from),endDate:Ke(m.to)},t=new URLSearchParams(e).toString();i.logInteraction(c.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},className:ct,children:p.Ru.get("live_events.next_weekend_preset")})]})]})};var dt=n(29330),ut=n(3525),mt=n(42778),gt=n(5913),vt=n(57865);const ht="Ig5vKQ7dYBd1EvrAFxNe",pt="h_q319q68ujja24YIoXY",ft="dFTQKQt3imsoOza3VE4G",xt="M8LA1p3y53Qnge37zUmz",jt="HZi6Ziy6mVJMFZsPf4wk",yt="KNX0R2c0r90zNTPYZm6X",_t="JI0woT5IN6EnNKnilhcg",kt="kAi1CfiOMYDExKkXuw44",Ct="Zwr6T4ceJI7KfyNxa4tS",Rt="mW3O8RnDMDY6MfRJKqd5",bt="raQK_4Eaqa5Zj06_aBm7",St="AOuYgrCnrYvPKsyzxqVy",Nt="P1dra4DUpn36RnCkuwa_",It="zBCfaF04WlTsiUcov2oJ",Dt="JxTPZX9AoptKanJg0zIw",wt=(0,a.memo)((e=>{const{concert:t,position:n,modalSpec:s}=e,i=(0,ot.l4)(e.concert.startDateIsoString),o=(0,vt.o_)(e.concert.uri),r=(0,a.useMemo)((()=>s?.eventRowFactory({position:n,uri:t.uri})),[s,n,t]),c=(0,$e.s)();return(0,tt.jsxs)(dt.N,{to:`/concert/${o?.id}`,className:kt,onClick:()=>{r&&c.logInteraction(r.hitUiNavigate({destination:`/concert/${o?.id}`}))},children:[(0,tt.jsxs)("div",{className:Ct,"aria-hidden":!0,children:[(0,tt.jsx)(D.E,{as:"div",variant:"marginalBold",className:Rt,children:(0,ot.tj)(i)}),(0,tt.jsx)(D.E,{as:"div",variant:"bodyMediumBold",className:bt,children:(0,ot.Py)(i)})]}),(0,tt.jsxs)("div",{className:St,children:[(0,tt.jsx)(D.E,{as:"div",variant:"bodySmallBold",className:Nt,"data-testid":"event-title",children:t.title}),(0,tt.jsx)(gt.s,{children:(0,ot.Fn)(i)}),(0,tt.jsxs)(D.E,{as:"div",variant:"bodySmall",className:It,children:[(0,ot.VJ)(i)," • ",(0,ot.WB)(i)]}),(0,tt.jsx)(D.E,{as:"div",variant:"bodySmall",className:Dt,"data-testid":"event-venue",children:[t.location.venue,t.location.city].join(p.Ru.getSeparator())})]})]},t.uri)})),Ut=e=>{const t=(0,a.useMemo)((()=>e.feedSpec?.groupedEventModalFactory({uri:e.artist.uri||""})),[e.feedSpec,e.artist]),n=(0,$e.s)(),s=(0,Ve.t)(t),i=()=>{t&&n.logInteraction(t.closeButtonFactory().hitUiHide()),e.onClose()};return(0,tt.jsx)(w.A,{contentLabel:p.Ru.get("live_events.label"),isOpen:!0,className:ht,onRequestClose:i,children:(0,tt.jsxs)("section",{className:pt,ref:s,children:[(0,tt.jsx)("div",{className:ft,children:(0,tt.jsx)(Et,{"aria-label":p.Ru.get("close"),iconOnly:I.M,size:"small",onClick:i})}),(0,tt.jsxs)("div",{className:xt,children:[(0,tt.jsx)(mt._,{height:"48",width:"48",className:jt,src:e.artist.imageUri}),(0,tt.jsxs)("div",{className:yt,children:[(0,tt.jsx)(D.E,{as:"h3",variant:"bodyMediumBold",className:_t,"data-testid":"event-venue",children:e.artist.name}),(0,tt.jsx)(D.E,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:p.Ru.get("concerts.count_near_location",e.concerts.length,e.location.city)})]})]}),e.concerts.map(((e,n)=>(0,tt.jsx)(wt,{concert:e,position:n,modalSpec:t},e.uri)))]})})};var Et=(0,ut.Ay)(d.H).withConfig({displayName:"ConcertModal___StyledButtonTertiary",componentId:"sc-179c8vh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const Ft=(0,a.memo)((e=>{const{event:t,onClose:n,feedSpec:s}=e,i=t?.concerts[0]?.concert,o=i?.artists[0],r=(0,a.useMemo)((()=>s?.groupedEventModalFactory({uri:o?.uri||""})),[s,o]),c=(0,$e.s)();if(!t||!i||!o)return null;return(0,tt.jsx)(Ut,{artist:{imageUri:o.imageUri,name:o.name,uri:o.uri},location:{city:i.location,venue:i.venue},concerts:t.concerts.map((e=>({uri:`spotify:concert:${e.concert.id}`,title:e.concert.title,startDateIsoString:e.concert.date,location:{city:e.concert.location,venue:e.concert.venue}}))),onClose:()=>{r&&c.logInteraction(r.closeButtonFactory().hitUiHide()),n()}})}));var Mt=n(87460),Bt=n(96054),At=n(57379),Tt=n(54236);const Pt=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:i}=t,o=t.artists[0];return(0,tt.jsx)(Bt.A,{uri:(0,vt.B4)(t.id).toURI(),title:(0,Tt.a9)(t),imageUrl:o.imageUri,date:t.startDate.localDate,subTitle:n?s:[s,i].join(p.Ru.getSeparator()),firstParty:(0,At.he)(t),onClick:a})})),zt=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((e=>{e.preventDefault(),n(t)}),[t,n]),i=(0,ot.l4)(t.openingDate),o=(0,ot.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,tt.jsx)(Bt.A,{title:(0,Tt.a9)(r),subTitle:`${(0,ot.WZ)(i,o)} • ${p.Ru.get("concerts.count",t.concerts.length)}`,onClick:s,imageUrl:c.imageUri,uri:(0,vt.B4)(r.id).toURI()})})),Ht=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,vt.B4)(o.id).toURI(),l=(0,$e.s)(),d=(0,a.useMemo)((()=>s?.eventCardFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),u=(0,Ve.t)(d),m=e=>{i(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,tt.jsx)("div",{ref:u,children:(0,tt.jsx)(zt,{event:t,onClick:m})});return(0,tt.jsx)("div",{ref:u,children:(0,tt.jsx)(Pt,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})}));var Lt=n(56032);const Ot=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((e=>{e.preventDefault(),n(t)}),[t,n]),i=(0,ot.l4)(t.openingDate),o=(0,ot.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,tt.jsx)(Lt.A,{image:c?.imageUri,title:(0,Tt.a9)(r),subTitle:p.Ru.get("concerts.count",t.concerts.length),dateRange:(0,ot.WZ)(i,o),uri:r?.id,onClick:s})})),Kt=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:i}=t,o=t.artists[0],r=(0,ot.l4)(t.startDate.localDate);return(0,tt.jsx)(Lt.A,{date:t.startDate.localDate,image:o?.imageUri,title:(0,Tt.a9)(t),subTitle:n?s:[s,i].join(p.Ru.getSeparator()),dateRange:(0,ot.Y)(r),uri:(0,vt.B4)(t.id).toURI(),onClick:a})})),Wt=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,vt.B4)(o.id).toURI(),l=(0,$e.s)(),d=(0,a.useMemo)((()=>s?.eventRowFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),u=(0,Ve.t)(d),m=e=>{i(e)};if(t.concerts.length>1)return(0,tt.jsx)("div",{ref:u,children:(0,tt.jsx)(Ot,{event:t,onClick:m})});return(0,tt.jsx)("div",{ref:u,children:(0,tt.jsx)(Kt,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})}));var $t=n(60088);const Vt="MVPegsivznZB6gdkcnkH",Yt="vktIWsUczavLRrl4SkRt",Gt="LOJZO2MnGW5dCIawF767",qt="tyc7QRlEJigVFIAeLGOB",Zt="PoljWhTLU3MKqIx2gSPY",Qt="ajxCNAuBJSgYfKUUBWBT",Jt="WR2h2Li5XTrBn_Rdme_k",Xt=(0,a.memo)((e=>{const{title:t="",identifier:n,position:s,events:i,feedSpec:o,onOpenGroupedEvent:r,layout:c}=e,l=(0,a.useMemo)((()=>o?.eventSectionFactory({identifier:n,position:s})),[o,n,s]),d=(0,Ve.t)(l);return 0===i.length?null:(0,tt.jsxs)("div",{className:Vt,ref:d,children:["grid"===c&&(0,tt.jsx)($t.pZ,{value:"headered-grid",index:s,children:(0,tt.jsx)(Mt.$,{total:i.length,title:t,showAll:!0,withEncoreCards:!1,children:i.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,tt.jsx)(Ht,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))})}),"list"===c&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)(D.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Yt,children:t}),i.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,tt.jsx)(Wt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))]})]})}));var en=n(36956),tn=n(90503),nn=n(89811);const an=async()=>(await(0,nn.oF)(tn.n.getInstance())).body;var sn=n(28512);const on=(0,a.memo)((e=>{const{spec:t,layout:n}=e,[s,i]=(0,a.useState)(),o=(0,en.I)({queryKey:["savedConcerts"],queryFn:an}),r=(0,sn.W)(),c=o.data?.userLocation,l=c||p.Ru.get("concerts.default_location");return(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(x.Q,{children:`${p.Ru.get("live_events.label")}`}),o.data?.events.length?(0,tt.jsx)(tt.Fragment,{children:(0,tt.jsx)(Xt,{title:p.Ru.get("concerts_upcoming"),identifier:"saved",position:0,events:o.data?.events,feedSpec:t,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];r({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:n})}):(0,tt.jsxs)("div",{className:Gt,children:[(0,tt.jsx)(D.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Qt,children:p.Ru.get("concerts_interested_in_live_events")}),(0,tt.jsx)(D.E,{as:"p",className:Jt,children:p.Ru.get("concerts_no_events_description")}),(0,tt.jsx)(dt.N,{to:"/concerts",className:qt,children:(0,tt.jsx)(R.n,{as:"span",className:Zt,children:p.Ru.get("concerts_browse_more_events")})})]}),(0,tt.jsx)(D.E,{variant:"marginal",semanticColor:"textSubdued",children:p.Ru.get("live_events.disclaimer")}),(0,tt.jsx)(Ft,{event:s,locationName:l,feedSpec:t,onClose:()=>i(void 0)})]})}));var rn=n(13923),cn=n(76922),ln=n(18462);const dn=e=>{const[t]=e;if(!("visuals"in t.data))return;const[n]=t.data.visuals.avatarImage?.sources??[];return n?.url},un=e=>{const[t,n]=(0,a.useState)(!1),s=(0,a.useMemo)((()=>{if(!(0,ln.ys)(e))return;const[t]=e.concerts;if(!(0,ln.$V)(t))return;const n=(0,vt.o_)(t.data.uri);return e.spec?.eventCardFactory({identifier:n?.id,position:e.position,uri:t.data.uri})}),[e]),i=(0,$e.s)(),o=(0,Ve.t)(s);if(!(0,ln.ys)(e))return;const[r]=e.concerts;if(!(0,ln.$V)(r))return;const[c]=r.data.artists.items,l=dn(r.data.artists.items),{startDate:d,endDate:u}=(0,ot.Vi)(e.concerts);return{isModalOpen:t,handleClick:e=>{e.preventDefault(),n(!0),s&&i.logInteraction(s.hitUiReveal())},handleClose:()=>n(!1),concert:{uri:r.data.uri,title:r.data.title,imageUrl:l,dateRange:(0,ot.WZ)(d,u),startDateIsoString:r.data.startDateIsoString},artist:{uri:"uri"in c.data?c.data.uri:"",name:"profile"in c.data?c.data.profile.name:"",imageUri:l??""},location:{city:r.data.location.city,venue:r.data.location.name},totalConcerts:e.concerts.length,concerts:e.concerts.map((e=>(0,ln.$V)(e)?{uri:e.data.uri,title:e.data.title,location:{city:e.data.location.city,venue:e.data.location.name},startDateIsoString:e.data.startDateIsoString}:null)).filter(ln.se),ref:o}},mn=e=>{const t=(0,$e.s)(),n=(0,a.useMemo)((()=>{const t=(0,vt.o_)((0,ln.$V)(e)?e.data.uri:"");return e.spec?.eventCardFactory({identifier:t?.id,position:e.position,uri:t?.toURI()??""})}),[e]);if(!(0,ln.$V)(e))return;return{imageUrl:dn(e.data.artists.items)??"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(p.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,ot.Y)(new Date(e.data.startDateIsoString)),handleClick:()=>n&&t.logInteraction(n.hitUiNavigate({destination:e.data.uri}))}},gn="V5SKycHF8ljKTRcTXM52",vn="CzWhnZA1N50SUeRTGNXg",hn="kA_2O3KDNrREQ60CWtsH",pn="eIRhBzZ6DVZOR5G3KjAQ",fn="o9A1xL55C2qn_cIvXSfJ",xn={ConcertGroup:e=>{const t=un(e);return t?(0,tt.jsxs)("div",{ref:t.ref,children:[(0,tt.jsx)(Lt.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,image:t.concert.imageUrl??"",subTitle:p.Ru.get("concerts.count",t.concerts.length),dateRange:t.concert.dateRange}),t.isModalOpen&&(0,tt.jsx)(Ut,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:e=>{const t=mn(e);return t?(0,tt.jsx)(Lt.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,image:t.imageUrl,date:t.date,onClick:t.handleClick}):null}},jn=e=>{const t=(0,a.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,Ve.t)(t);return 0===e.concerts.length?null:(0,tt.jsxs)("div",{ref:n,className:fn,children:[(0,tt.jsx)(D.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:e.title}),e.concerts.map(((e,n)=>{if(a=e.__typename,!Object.keys(xn).includes(a??""))return null;var a;const s=xn[e.__typename];return(0,tt.jsx)(s,{position:n,spec:t,...e},n)})).filter(ln.se)]})},yn={ConcertGroup:e=>{const t=un(e);return t?(0,tt.jsxs)("div",{ref:t.ref,children:[(0,tt.jsx)(Bt.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,imageUrl:t.concert.imageUrl,subTitle:`${t.concert.dateRange} • ${p.Ru.get("concerts.count",t.totalConcerts)}`}),t.isModalOpen&&(0,tt.jsx)(Ut,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:e=>{const t=mn(e);return t?(0,tt.jsx)(Bt.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,imageUrl:t.imageUrl,date:t.date,onClick:t.handleClick}):null}},_n=e=>{const t=(0,a.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,Ve.t)(t);return(0,tt.jsx)("div",{ref:n,children:(0,tt.jsx)(Mt.$,{total:e.concerts.length,title:e.title,showAll:!0,withEncoreCards:!1,children:e.concerts.map(((e,n)=>{if(a=e.__typename,!Object.keys(yn).includes(a??""))return null;var a;const s=yn[e.__typename];return(0,tt.jsx)(s,{position:n,spec:t,...e},n)})).filter(ln.se)})})},kn=e=>{const t={"recommended-events":p.Ru.get("concerts_recommended_for_you"),"popular-events":p.Ru.get("concerts_popular")};return e in t?t[e]:p.Ru.get("concerts")},Cn=e=>{if(!(0,ln.eO)(e.data))return null;const t="grid"===e.layout?_n:jn;return(0,tt.jsx)(t,{title:kn(e.data.key),concerts:e.data.concerts,spec:e.spec})},Rn="TsOt70CoNNJlItfzhvtF",bn=e=>{if(!(0,ln.dR)(e.data))return null;const t="grid"===e.layout?_n:jn;return(0,tt.jsxs)("div",{children:[e.data.sections.map(((n,a)=>{return(0,tt.jsx)(t,{position:a,title:(s=n.key,s?.match(/^(\d{4})-(\d{2})-(\d{2})$/)?(0,ot.Fn)(new Date(s)):p.Ru.get("live_events.all_events_tab")),concerts:n.concerts,spec:e.spec},a);var s})),e.data.paginationKey&&e.fetchNextPage&&(0,tt.jsx)(R.n,{className:Rn,onClick:()=>e.fetchNextPage&&e.fetchNextPage(),children:p.Ru.get("concerts.load_more")})]})};var Sn=n(39836),Nn=n(49912),In=n(63203);const Dn=new Nn.l("concertFeed","query","2c9fb8f35175a8a3f0bd4cbe9de95c3298228db153577f0492e54251c2f813bb",null);var wn=n(2210),Un=n(23411);const En=(e,t=Sn.q)=>{const{request:n}=(0,a.useContext)(wn.j),s=t({queryKey:["concert-feed",e.geoHash,e.geonameId,e.dateRange],queryFn:({pageParam:t})=>(0,Un.c)(n,Dn,{...e,paginationKey:""===t?null:t}),staleTime:6e4,gcTime:6e4,enabled:!!e.geoHash||!!e.geonameId,initialPageParam:"",getNextPageParam:e=>{if(!(0,ln.Bw)(e?.data?.liveEventsFeed))return"";const t=e.data.liveEventsFeed.sections.find((e=>"AllEvents"===e.__typename))??{};return(0,ln.dR)(t)?t.paginationKey:""}}),i=(e=>{const t=e?.reduce(((e,t)=>{const n=e?.liveEventsFeed,a=t?.data?.liveEventsFeed;if(!(0,ln.Bw)(a)||!(0,ln.Bw)(n))return e;const s=n.sections.find((e=>"AllEvents"===e.__typename))??{},i=(0,ln.dR)(s)?s.sections:[],o=a.sections.find((e=>"AllEvents"===e.__typename))??{},r=[...i,...(0,ln.dR)(o)?o.sections:[]].reduce(((e,t)=>{const n=e[t.key]??[];return(0,ln.ys)(t)?{...e,[t.key]:[...n,...t.concerts]}:e}),{}),c=Object.entries(r).map((([e,t])=>({key:e,concerts:t})));return{liveEventsFeed:{sections:a.sections.map((e=>"AllEvents"===e.__typename||(0,ln.dR)(e)?{sections:c,__typename:"AllEvents"}:e))}}}),{liveEventsFeed:{sections:[]}});return t})(s.data?.pages);return{...s,data:i}},Fn={AllEvents:bn,LiveEventSection:Cn},Mn=e=>{const{data:t,isLoading:n,error:a,fetchNextPage:s}=En({geoHash:e.location.geoHash||null,geonameId:e.location.geonameId||null,dateRange:e.dateRange?.from&&e.dateRange?.to?{from:(0,At.bU)(e.dateRange?.from),to:(0,At.bU)(e.dateRange.to)}:null});return n?(0,tt.jsx)(cn.A,{hasError:!1,errorMessage:""}):!(0,ln.Bw)(t?.liveEventsFeed)||0===t.liveEventsFeed.sections.length||a?(0,tt.jsx)(rn.p,{title:p.Ru.get("concerts.error.no_concerts_found_title"),message:p.Ru.get("concerts.error.no_concerts_found_message",e.location.name),renderInline:!0}):(0,tt.jsx)("div",{children:t?.liveEventsFeed.sections.map(((t,n)=>{if(!(0,ln.w1)(t))return null;const a=Fn[t.__typename];return(0,tt.jsx)(a,{layout:e.layout,spec:e.spec,fetchNextPage:s,data:t},n)})).filter(ln.se)})};var Bn=n(77647),An=n(53044),Tn=n(67803);const Pn=new Nn.l("concertLocationDetails","query","b13f195349f188fee25480ae889d782852d68663bf07743c654244454750d681",null);var zn=n(28773);const Hn=e=>{if(!e||!("items"in e))return;const[t]=e.items;return t},Ln=(e,t)=>{if(!e)return"/concerts";const n=t?.normalize().replaceAll(/\W+/g,"-");return n?`/concerts/location/${e}-${n}`:`/concerts/location/${e}`},On=(e=Tn.g)=>{const t=(0,sn.W)(),{isAnonymous:n}=(0,o.d4)(zn.Ht),{location:s}=e(),[i]=(0,r.ok)(),c=(0,Tn.Zp)(),[,l]=s?.match(/^(\d+)/)??[],[d,u]=(0,a.useState)(l?{geonameId:Number(l)}:void 0),{data:m}=(g={geonameId:d?.geonameId?String(d?.geonameId):null,isAnonymous:n},(0,In.I)(Pn,g,v));var g,v;const h=e=>{u(e),t({type:"click",intent:"change-live-events-location"}),e?.geonameId&&c({pathname:String(e.geonameId)===m?.me?.profile?.location?.geonameId?"/concerts":Ln(e.geonameId,e.location),search:new URLSearchParams(i).toString()})};if(d){const e=Hn(m?.concertLocations);return{location:{geonameId:d.geonameId??Number(e?.geonameId),geohash:d.geohash??e?.geoHash,name:d.name??e?.name},onChangeLocation:h}}const p=m?.me?.profile?.location,f=Hn(m?.concertLocations);return{location:p?.geoHash||f?.geonameId?{geohash:p?.geoHash??f?.geoHash,geonameId:Number(p?.geonameId??f?.geonameId),name:p?.name??f?.name}:void 0,onChangeLocation:h}};var Kn=n(98561),Wn=n(9525),$n=n(87945);const Vn=()=>{const{isAnonymous:e}=(0,o.d4)(zn.Ht),[t,n]=(0,a.useState)("grid"),{location:s,onChangeLocation:R}=On(),b=(0,v.NC)($n.tH),S=it(),[N,I]=(0,r.ok)(),{spec:D}=(0,Wn.r)(h.s,{}),w=(0,a.useMemo)((()=>D.headerFactory()),[D]),U=(0,$e.s)(),E=e&&s?.name?p.Ru.get("live_events.location_concert_tickets",s.name):p.Ru.get("live_events.label"),F=()=>{const e=w.layoutToggleFactory().hitToggleState({stateBeforeToggle:t,stateAfterToggle:"grid"===t?"list":"grid"});U.logInteraction(e),n("grid"===t?"list":"grid")},M="interested"===N.get("filter"),B=M?l.$:d.H;return(0,tt.jsxs)("section",{children:[(0,tt.jsx)(x.Q,{children:(0,Kn.zV)(s?.name)}),(0,tt.jsxs)(j.z,{size:j.K.SMALL,backgroundColor:c.Hhe,children:[(0,tt.jsx)(y.Y,{children:(0,tt.jsx)(C.mm,{children:E})}),(0,tt.jsx)(_.h,{children:(0,tt.jsx)(k.X,{text:E})})]}),(0,tt.jsxs)("div",{children:[(0,tt.jsx)(f.K,{backgroundColor:c.Hhe}),(0,tt.jsxs)("div",{className:i()(gn,"contentSpacing"),children:[(0,tt.jsxs)("div",{className:vn,children:[M?(0,tt.jsx)("div",{}):(0,tt.jsxs)("div",{className:hn,children:[(0,tt.jsx)(Bn.A,{headerSpec:w,locationStr:s?.name??"",handleLocationChange:R}),(0,tt.jsx)(lt,{spec:D})]}),(0,tt.jsxs)("div",{className:pn,children:["grid"===t&&(0,tt.jsx)(d.H,{"aria-label":p.Ru.get("concerts.feed_list_layout"),iconOnly:u.N,onClick:F,size:"small"}),"list"===t&&(0,tt.jsx)(d.H,{"aria-label":p.Ru.get("concerts.feed_grid_layout"),iconOnly:m.D,onClick:F,size:"small"}),(0,tt.jsx)(B,{size:"small",iconLeading:g.E,onClick:()=>I({filter:M?"":"interested"}),children:p.Ru.get("concerts_interested")})]})]}),M?(0,tt.jsx)(on,{layout:t,spec:D}):(0,tt.jsxs)(tt.Fragment,{children:[b&&(0,tt.jsx)(An.k,{onLocationChange:R}),(0,tt.jsx)(Mn,{spec:D,layout:t,location:{geoHash:s?.geohash,geonameId:s?.geonameId?String(s.geonameId):"",name:s?.name??""},dateRange:S})]})]})]})]})}},57379:(e,t,n)=>{n.d(t,{bU:()=>o,he:()=>i,nm:()=>s});var a=n(42534);const s=(e,t)=>{if(!e)return"/concerts";const n=t?.normalize().replaceAll(/\W+/g,"-");return n?`/concerts/location/${e}-${n}`:`/concerts/location/${e}`};const i=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),o=e=>(0,a.x)(e,{representation:"date"})},89811:(e,t,n)=>{n.d(t,{Jr:()=>i,aw:()=>o,m9:()=>s,oF:()=>r});var a=n(75975);const s=(e,t)=>e.build().withMethod("POST").withHost(a.tc).withPath(`/v2/concerts/saved/${t}`).withEndpointIdentifier("/concerts/saved/{concertId}").withoutMarket().send(),i=(e,t)=>e.build().withMethod("DELETE").withHost(a.tc).withPath(`/v2/concerts/saved/${t}`).withEndpointIdentifier("/concerts/saved/{concertId}").withoutMarket().send(),o=(e,t,n)=>e.build().withMethod("POST").withHost(a.Og).withPath("/v2/contains").withHeaders([{key:"content-type",value:"application/json"},{key:"accept",value:"application/json"}]).withBody(JSON.stringify({username:t,set:"concerts",items:[{uri:n}]})).send();function r(e){return e.build().withHost(a.tc).withPath("/v3/concerts/saved").withEndpointIdentifier("/v3/concerts/saved").send()}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map