"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3667],{81718:(e,i,t)=>{t.r(i),t.d(i,{PiPMiniPlayer:()=>Qi});var s=t(30758),l=t(97500),a=t.n(l),n=t(67673),r=t(75545),o=t(83042),c=t(83537),u=t(80741),d=t(59695),m=t(73704),g=t(54590),h=t(56288),x=t(48031),p=t(93702),k=t(62768),v=t(64035),C=t(45983),N=t(98406),j=t(66789),f=t(89476),S=t(98315);const b=({uri:e,spec:i,logger:t})=>{const l=(0,s.useRef)(e);l.current=e;const a=(0,N.z)(),n=(0,s.useMemo)((()=>i.playerControlsFactory()),[i]),r=(0,s.useCallback)((e=>{let i=null;"pause"===e?i=n.playPauseButtonFactory().hitPause({itemToBePaused:l.current}):"resume"===e&&(i=n.playPauseButtonFactory().hitResume({itemToBeResumed:l.current})),i&&t.logInteraction(i)}),[t,n]),o=(0,s.useCallback)((e=>{const i=n.likeButtonFactory(),s=e?i.hitLike({itemToBeLiked:l.current}):i.hitRemoveLike({itemNoLongerLiked:l.current});t.logInteraction(s)}),[t,n]),c=(0,s.useCallback)((()=>{const e=a.getState();if(!e)return;const i=n.previousButtonFactory().hitSkipToPrevious(y(e));t.logInteraction(i)}),[t,a,n]),u=(0,s.useCallback)((()=>{const e=a.getState();if(!e)return;const i=n.nextButtonFactory().hitSkipToNext(y(e));t.logInteraction(i)}),[t,a,n]),d=(0,s.useCallback)((e=>{const i=n.repeatButtonFactory();let s=null;switch(e){case j.p.REPEAT_TRACK:s=i.hitRepeatOneEnable();break;case j.p.REPEAT_CONTEXT:s=i.hitRepeatEnable();break;case j.p.REPEAT_NONE:s=i.hitRepeatDisable();break;default:(0,S.k)(e)}s&&t.logInteraction(s)}),[t,n]),m=(0,s.useCallback)((e=>{const i=e?"shuffle":"linear",s=e?"linear":"shuffle",a=n.shuffleButtonFactory({uri:l.current}).hitSelectShuffleMode({previousMode:s,selectedMode:i});t.logInteraction(a)}),[t,n]),g=(0,s.useCallback)((e=>{const i=n.volumeMuteButtonFactory();t.logInteraction("muted"===e?i.hitMutePlayback():i.hitUnmutePlayback())}),[t,n]),h=(0,s.useCallback)((e=>{const i=n.volumeBarFactory();t.logInteraction(i.hitSetVolume({newVolumePercentage:B(e)}))}),[t,n]),x=(0,s.useCallback)((e=>{const i=n.volumeBarFactory();t.logInteraction(i.dragSetVolume({newVolumePercentage:B(e)}))}),[t,n]),p=(0,s.useCallback)((e=>{const i=n.seekBackwardButtonFactory();t.logInteraction(i.hitSeekByTime({msSeekedOffset:e}))}),[t,n]);return{onClickSeekForward:(0,s.useCallback)((e=>{const i=n.seekForwardButtonFactory();t.logInteraction(i.hitSeekByTime({msSeekedOffset:e}))}),[t,n]),onClickSeekBack:p,onClickPlayPause:r,onClickLike:o,onClickSkipPrevious:c,onClickSkipNext:u,onClickRepeat:d,onClickShuffle:m,onClickVolumeButton:g,onClickVolumeBar:h,onDragVolumeBar:x,onClickShare:(0,s.useCallback)((()=>{const e=n.shareButtonFactory({uri:l.current});t.logInteraction(e.hitCopyToClipboard())}),[t,n]),onClickProgressBar:(0,s.useCallback)((e=>{const i=n.progressBarFactory();t.logInteraction(i.hitSeekToTime({msToSeekTo:e}))}),[t,n]),onDragProgressBar:(0,s.useCallback)((e=>{const i=n.progressBarFactory();t.logInteraction(i.dragSeekToTime({msToSeekTo:e}))}),[t,n])}};function y(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,f.s)(e)??-1,totalContentMs:e.duration??-1}}function B(e){return Math.floor(100*e)}var w=t(24257),L=t(11313),R=t(97093),P=t(85907),M=t(86581);const E="d_srhjvwD_GUA3bcCWe4",D="Y1sIRIE9_S2jPP9L89qs",T="lcyebQsHz0j8IkDXTAlB",I="enGtDaA6WTTvIFhZz1wz",V="iKzG3nPAIAbL5CZAbKJU",z="Kj0qWPCL3_VrCWRyNrMD",_="Jo4RE0VhDecfPElNZucO";var F=t(86070);let A=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const W=({item:e,spec:i,logger:t,size:s=A.xs,className:l})=>{const n=e.uri,r=(0,R.X)(),o=(0,c.L)(),u=o?.context,{shouldShowFeedbackControls:d}=(0,C.d)(u),{onClickLike:m}=b({uri:n,spec:i,logger:t});return(0,M.v)(e)&&u?r&&(0,L.N)(e)?(0,F.jsx)("div",{className:_,children:(0,F.jsx)(w.o,{contextUri:e.metadata?.context_uri,id:e.uid??void 0,uri:e.uri,isActive:!0})}):(0,F.jsxs)("div",{className:z,children:[(0,F.jsx)(v.a,{context:u,item:e}),(0,F.jsx)(k.b,{size:d?A.xs:s,uri:n,onClick:m,className:a()(T,l),isMiniPlayer:!0})]}):(0,P.p)(e)?(0,F.jsx)(p.b,{size:s,uri:n,onClick:m,className:a()(T,l),condensed:!0}):null};var O=t(47441),U=t(58221),Z=t(90865),K=t(9525);const Q="yb0n1ZOvcsGEP6MtzpHw",H="wigNir143xMt4ihKMqrK",J="jbCLA5mslXPNLClPNh8h",Y="srBfv7LB0I9QnzxBpeTV",q="N5WQok6ioU_Dmf0F0O31",G="NZlJ5gYuUaWvALQ2gGfg",X="CsqhW5xDG4TO3VV20IZJ";const $=({item:e,onClick:i,className:t})=>{const{spec:s,logger:l}=(0,K.r)(r.w,{}),o=(0,n.NC)(U.fZ_),c=(0,d.XX)(e),p=(0,Z.N)(e)?c?.title:e.name,k=(0,Z.N)(e)?c?.subtitle:e.name,v=(0,O.K)(),C=function(e){switch(e){case"SMALL":return{title:"bodySmall",subtitle:"marginal"};case"MEDIUM":return{title:"bodyMedium",subtitle:"bodySmall"};default:return{title:"titleSmall",subtitle:"bodySmall"}}}(v.vertical),N="SMALL"===v.vertical;return(0,F.jsxs)("div",{className:a()(Q,t),children:[(0,F.jsx)("div",{className:Y,children:(0,F.jsx)(h.r,{title:p,children:(0,F.jsx)(u.E,{"data-testid":"context-item-info-title",as:"div",variant:C.title,className:q,dir:"auto",children:(0,F.jsx)(g.R,{item:e,onClick:i,adUrl:c?.url,children:p})})},e.uri)}),(0,F.jsx)(x.l,{className:X,item:e,size:"DEFAULT"===v.vertical?"small":"xsmall",variant:"DEFAULT"===v.vertical?"bodySmall":"marginal",enableVideoButton:!0}),(0,F.jsx)("div",{className:G,children:(0,F.jsx)(h.r,{title:k,children:(0,F.jsx)(u.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:C.subtitle,className:G,semanticColor:"textSubdued",children:(0,F.jsx)(m.n,{item:e,onClick:i})})},e.uri)}),o&&!N&&(0,F.jsx)("div",{className:H,children:(0,F.jsx)("div",{className:J,children:(0,F.jsx)(W,{item:e,spec:s,logger:l,size:A.sm})})})]})};var ee=t(9856),ie=t.n(ee);const te=()=>!0===ie().getParser(window.navigator.userAgent).satisfies({chrome:">=123"}),se=()=>{te()&&window.focus()};var le=t(67803),ae=t(23920),ne=t(28512),re=t(12910),oe=t(32696),ce=t(19017);const ue="U7qJ1UbUI0C76xXqYVQY",de="wSLUJtAztEeB6cSHzEjf",me="ivh1pWB_obHbkRTZRwlA",ge="CppZQsRDE7tQVl_Uo22Y";t(48513),t(50517);const he={title:"bodyMediumBold",subtitle:"bodySmall"},xe={title:"titleSmall",subtitle:"bodyMedium"},pe=s.memo((()=>{const{openURLWithSessionTransfer:e}=(0,ce.L)(),i="SMALL"===(0,O.K)().vertical?he:xe,t=(0,oe.D)("loggedin_upgrade_button"),l=(0,le.Zp)(),a=(0,re.k)(),{url:n,isExternal:r}=a,c=(0,ne.W)(),d=(0,s.useCallback)((()=>{c({intent:"upgrade-to-premium",type:"click"}),!1===r?l("/premium"):e(t(n),"_blank")}),[c,r,n,l,e,t]);return(0,F.jsx)("div",{className:ue,children:(0,F.jsxs)("div",{className:de,children:[(0,F.jsx)(u.E,{variant:i.title,dir:"auto",className:me,children:o.Ru.get("web-player.pip-mini-player.upsell.title")}),(0,F.jsx)(u.E,{variant:i.subtitle,semanticColor:"textSubdued",children:o.Ru.get("web-player.pip-mini-player.upsell.subtitle")}),(0,F.jsx)("div",{className:ge,children:(0,F.jsx)(ae.$,{onClick:d,size:"small",children:o.Ru.get("web-player.pip-mini-player.upsell.cta-button")})})]})})}));var ke=t(84224),ve=t(29330);const Ce="document-pip-hover-element",Ne="document-pip-cover-art",je="document-pip-cover-art-placeholder",fe="transparent";var Se=t(33436),be=t(36138);function ye(e,i,t,s){try{if(!e)return t;const l=getComputedStyle(e);if(!l)return t;const a=l.getPropertyValue(i),n=parseInt(a.replace(s,""),10);return isNaN(n)?t:n}catch(e){return t}}var Be=t(44492),we=t(92515),Le=t(79638),Re=t(15901),Pe=t(79631);const Me="wF7I8x6BNoB5TCxuQM6p",Ee="mTVLkxm92ETj9KUKj6We",De="_ZzrZWfp7kDAE2lh9_Wc",Te="Z7EJBI5IBlrJ1ze7IeeW",Ie="v5BmE36Bbgt7MSjmR6Xc",Ve="CAQW4b5xnSED1cuM6jcp",ze="Pvgy7FmdedDiDBpWdtwf",_e="GSgApqjTNqV1hBpu3zeT",Fe="cRGZivJEkNn8_Q7kaHpT",Ae="jOhwShRZLQkG51TckxOL",We="AfV1a_jkmN7Ep4mov4u7",Oe="QrDtnomlujlNGYbhYEFQ",Ue="Jgem6BNDvKfWTBl3cX4W",Ze="ePoosDhdXDFF4p3vqKLd",Ke="QGE_nRKg4bMbNKF_e7PM",Qe="ddMrU_P5vADrfZCD5KQP",He="x591ODwZ11KBAWKS6SiE",Je="yyE7Kg8ClZLrYU03bSoA",Ye="GJYNq4mAAnZScLzJPrZb",qe="mBYWBXnQ_1G3IS2q0zUM",Ge="F7RVFhPYBKleXl4ulrwe",Xe="Q4qOSqJZ_dfNRxOBhsGE",$e="hix4I_WU5iQPehn_m5h2",ei="gOpH1qSy5WZp_dGqBjSO",ii="NEKBj5FX847wFAhR57Bm",ti="dahc71cxY4Nzk6ebA2ZW",si="vYL9B3OtXRb7_BrVMqPs",li="dJY9K_yl2SIFh2sQav8J",ai="B62SqNdB5yicbOhkDWDy",ni="ixLnBGpFXBDXJBwJAFN2",ri="xG6CoSo4Qt0PDw74JLdM",oi="COvUYZFLWyAYMoZxYBWV";const ci=({item:e,imageUrl:i})=>{const t=(0,ke.iz)(e),s=(0,F.jsx)(we._,{className:He,src:i,loading:"eager",testid:Ne,children:(0,F.jsx)("div",{className:Je,children:(0,F.jsx)(Be.s,{size:"xlarge",type:e.type,"data-testid":je})})});return t.url?(0,F.jsx)(ve.N,{className:Qe,to:t.url,children:s}):s},ui=()=>{const{item:e,context:i}=(0,c.L)()??{},t=(0,s.useMemo)((()=>(0,Pe.h)(e?.images??void 0,{desiredSize:640})),[e?.images,640]),l=(0,Re.l)(),r=(0,n.NC)(U.a4n),{isYourDJNarrator:o}=(0,be.CV)(),u=(0,s.useRef)(null),d=(0,s.useCallback)((()=>{if(!u.current)return;const e=u.current?.children[0];if(!e)return;const{offsetWidth:i,offsetHeight:t}=u.current;let s=Math.min(i,t);s=Math.min(s,640),1===ye(e,"--extra-padding",0,"")&&(s-=Math.max(Math.min(.1*s,64),12)),e.width=e.height=s}),[]),m=(0,Le.ox)();(0,s.useEffect)((()=>(m?.addEventListener("resize",d),()=>{m?.removeEventListener("resize",d)})),[d,m]);const g=e&&function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(e),h=(0,Z.N)(e);let x=!g;!g||!l&&r||(x=!0);const p=(0,s.useMemo)((()=>x&&!h&&te()),[h,x]);let k;k=o?(0,F.jsx)(Se.aU,{}):h?(0,F.jsx)(ci,{item:e,imageUrl:t}):(0,F.jsx)(we._,{className:He,src:t,loading:"eager",testid:Ne,children:(0,F.jsx)("div",{className:Je,children:(0,F.jsx)(Be.s,{size:"xlarge",type:e?.type,"data-testid":je})})});const v=(0,s.useCallback)((()=>{p&&se()}),[p]),C=(0,s.useCallback)((e=>{"Enter"===e.key&&v()}),[v]);return e&&i&&x?(0,F.jsx)("div",{className:a()(Ze,{[Ke]:p}),ref:e=>{u.current=e,d()},role:"button",tabIndex:p?0:-1,onClick:v,onKeyDown:C,children:k}):null};var di=t(68226),mi=t(68564),gi=t(56672),hi=t(26051),xi=t(17617),pi=t(98789),ki=t(66859),vi=t(11632);const Ci=()=>(0,F.jsx)("svg",{width:"7",height:"8",viewBox:"0 0 7 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Ie,children:(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.37397 1.94965C6.60829 1.71534 6.60829 1.33544 6.37397 1.10113C6.13966 0.866812 5.75976 0.866812 5.52544 1.10113L3.47461 3.15196L1.42422 1.10157C1.18991 0.86726 0.81001 0.86726 0.575695 1.10158C0.341381 1.33589 0.341381 1.71579 0.575695 1.9501L2.62608 4.00049L0.575696 6.05087C0.341381 6.28519 0.341381 6.66509 0.575696 6.8994C0.81001 7.13372 1.18991 7.13372 1.42422 6.8994L3.47461 4.84902L5.52544 6.89985C5.75976 7.13416 6.13966 7.13416 6.37397 6.89985C6.60829 6.66554 6.60829 6.28564 6.37397 6.05132L4.32314 4.00049L6.37397 1.94965Z",fill:"#912616"})}),Ni=s.memo((({className:e})=>"SMALL"!==(0,O.K)().vertical?(0,F.jsx)(di.U,{className:e}):(0,F.jsx)(mi.M,{className:e}))),ji=({className:e})=>{const{setVideoPlayerUIFlag:i}=(0,xi.d)(),{onClick:t}=(0,ki.D)({}),l=(0,s.useCallback)((()=>{i(pi.n.documentPip,!1),t()}),[i,t]),n=(0,hi.mv)();return(0,F.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:a()(e,De),children:[(0,F.jsx)("button",{className:Te,onClick:l,children:n.operatingSystem===vi.f.macOS?(0,F.jsx)(Ci,{}):(0,F.jsx)(gi.M,{size:"xsmall",className:Ie})}),(0,F.jsx)(Ni,{className:ze}),(0,F.jsx)("div",{className:Ve})]})};var fi=t(27372),Si=t(8159),bi=t(27355),yi=t(85587),Bi=t(57865),wi=t(66459);const Li=({onClick:e,item:i,className:t})=>(0,F.jsx)("div",{className:a()(V,t),children:(0,F.jsx)(wi.w,{sharingInfo:null,uri:i.uri,onClick:e,size:"small",interactionData:{type:"click",intent:"share"},disableTooltip:!0,ariaLabel:(0,Bi.gH)(i.uri)?o.Ru.get("context-menu.copy-episode-link"):o.Ru.get("context-menu.copy-track-link")})});var Ri=t(55122),Pi=t(53784),Mi=t(69091);const Ei=80,Di=s.memo((({pipWindowSize:e,item:i,spec:t,logger:s,direction:l,volumeIconRef:a})=>{const{onClickPlayPause:n,onClickVolumeButton:r,onClickVolumeBar:o,onDragVolumeBar:c,onClickSeekBack:u,onClickSeekForward:d}=b({uri:i.uri,spec:t,logger:s}),m=(0,Si.YQ)(c,500,{leading:!1,trailing:!0});return"DEFAULT"===e.vertical?(0,F.jsx)(bi.v3,{onClick:d,className:E}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:li,children:(0,F.jsx)(yi.M,{mode:yi.V.SHOW_SLIDER_ON_HOVER,sliderSize:Ei,sliderDirection:l,onToggleMuteClick:r,onVolumeBarClick:o,onVolumeBarDrag:m,className:E,volumeIconRef:a,isMiniPlayer:!0})}),(0,F.jsx)("div",{className:si,children:(0,F.jsx)(bi.hC,{onClick:u,className:E})}),(0,F.jsx)("div",{className:ii,children:(0,F.jsx)(bi.xJ,{onClick:n,className:E})}),(0,F.jsx)("div",{className:ti,children:(0,F.jsx)(bi.v3,{onClick:d,className:E})})]})})),Ti=s.memo((({item:e,spec:i,logger:t,pipWindowSize:s,shouldShowShareButton:l,direction:n,volumeIconRef:r})=>{const{onClickPlayPause:o,onClickSkipPrevious:c,onClickSkipNext:u,onClickVolumeButton:d,onClickVolumeBar:m,onDragVolumeBar:g,onClickSeekBack:h,onClickSeekForward:x,onClickShare:p}=b({uri:e.uri,spec:i,logger:t}),k=(0,Si.YQ)(g,500,{leading:!1,trailing:!0}),v="SMALL"===s.vertical,C="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,j=C&&!N;return(0,F.jsxs)(F.Fragment,{children:[(v||!l)&&(0,F.jsx)("div",{className:si,children:(0,F.jsx)("div",{className:D,children:(0,F.jsx)(W,{item:e,spec:i,logger:t,className:E})})}),!v&&(0,F.jsx)("div",{className:ai,children:(0,F.jsx)(yi.M,{mode:yi.V.SHOW_SLIDER_ON_HOVER,sliderSize:Ei,sliderDirection:n,onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:k,className:E,volumeIconRef:r,isMiniPlayer:!0})}),v&&(0,F.jsx)("div",{className:ai,children:(0,F.jsx)(yi.M,{mode:yi.V.SHOW_SLIDER_ON_HOVER,sliderSize:Ei,sliderDirection:"horizontal",onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:k,className:E,volumeIconRef:r,isMiniPlayer:!0})}),(0,F.jsx)("div",{className:li,children:(0,F.jsx)(bi.hC,{onClick:h,className:E})}),(0,F.jsx)("div",{className:ri,children:(0,F.jsx)(bi.dQ,{onClick:c,className:E})}),(0,F.jsx)("div",{className:ii,children:(0,F.jsx)(bi.xJ,{iconSize:j?"medium":"small",onClick:o,className:a()(E,I)})}),(0,F.jsx)("div",{className:ni,children:(0,F.jsx)(bi.$K,{onClick:u,className:E})}),(0,F.jsx)("div",{className:ti,children:(0,F.jsx)(bi.v3,{onClick:x,className:E})}),!v&&l&&(0,F.jsx)(Li,{item:e,onClick:p,className:E}),v&&l&&(0,F.jsx)("div",{className:oi,children:(0,F.jsx)(Li,{item:e,onClick:p,className:E})})]})})),Ii=s.memo((({item:e,spec:i,logger:t,pipWindowSize:s,shouldShowShareButton:l,direction:n,volumeIconRef:r})=>{const{onClickPlayPause:o,onClickSkipPrevious:c,onClickSkipNext:u,onClickVolumeButton:d,onClickVolumeBar:m,onDragVolumeBar:g,onClickShuffle:h,onClickRepeat:x,onClickShare:p}=b({uri:e.uri,spec:i,logger:t}),k=(0,Si.YQ)(g,500,{leading:!1,trailing:!0}),v="SMALL"===s.vertical,C="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,j=C&&!N;return(0,F.jsxs)(F.Fragment,{children:[(v||!l)&&(0,F.jsx)("div",{className:D,children:(0,F.jsx)("div",{className:si,children:(0,F.jsx)(W,{item:e,spec:i,logger:t,className:E})})}),!v&&(0,F.jsx)("div",{className:ai,children:(0,F.jsx)(yi.M,{mode:yi.V.SHOW_SLIDER_ON_HOVER,sliderSize:Ei,sliderDirection:n,onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:k,className:E,volumeIconRef:r,isMiniPlayer:!0})}),v&&(0,F.jsx)("div",{className:ai,children:(0,F.jsx)(yi.M,{mode:yi.V.SHOW_SLIDER_ON_HOVER,sliderSize:Ei,sliderDirection:"horizontal",onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:k,className:E,volumeIconRef:r,isMiniPlayer:!0})}),(0,F.jsx)("div",{className:a()(ri,E),children:(0,F.jsx)(Pi.w,{renderEnabled:()=>(0,F.jsx)(Ri.a,{size:"small",withSnackbar:!1}),renderDisabled:()=>(0,F.jsx)(bi.uP,{onClick:h})})}),(0,F.jsx)("div",{className:li,children:(0,F.jsx)(bi.dQ,{onClick:c,className:E})}),(0,F.jsx)("div",{className:ii,children:(0,F.jsx)(bi.xJ,{iconSize:j?"medium":"small",onClick:o,className:a()(E,I)})}),(0,F.jsx)("div",{className:ti,children:(0,F.jsx)(bi.$K,{onClick:u,className:E})}),(0,F.jsx)("div",{className:ni,children:(0,F.jsx)(bi.s_,{onClick:x,className:E})}),!v&&l&&(0,F.jsx)(Li,{item:e,onClick:p,className:E}),v&&l&&(0,F.jsx)("div",{className:oi,children:(0,F.jsx)(Li,{item:e,onClick:p,className:E})})]})})),Vi=s.memo((({item:e,spec:i,logger:t})=>{const l=e.uri,a=(0,n.NC)(U.fZ_),[r,o]=s.useState("vertical"),c=s.useRef(null),u=(0,O.K)();if(s.useEffect((()=>{if(c.current){const e=c.current.getBoundingClientRect().top;o(e-26<Ei?"horizontal":"vertical")}}),[u.height]),!l)return null;if((0,Z.N)(e))return(0,F.jsx)(Di,{item:e,spec:i,logger:t,pipWindowSize:u,direction:r,volumeIconRef:c});const d=function(e){if((0,P.p)(e)||(0,Mi.d)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(e);return d?(0,F.jsx)(Ti,{item:e,spec:i,logger:t,pipWindowSize:u,shouldShowShareButton:a,direction:r,volumeIconRef:c}):(0,F.jsx)(Ii,{item:e,spec:i,logger:t,pipWindowSize:u,shouldShowShareButton:a,direction:r,volumeIconRef:c})}));var zi=t(88163);const _i=s.memo((({item:e,spec:i,logger:t,onDragEnd:l,onDragStart:a})=>{const n=e.uri,{onClickProgressBar:r,onDragProgressBar:o}=b({uri:n,spec:i,logger:t}),c=(0,s.useCallback)(((e,i)=>{switch(i){case"drag":return o(e);case"hit":return r(e);default:return(0,S.k)(i)}}),[r,o]);return(0,F.jsx)(zi.x,{isPreview:!1,onChange:c,onDragStart:a,onDragEnd:l,timerPlacement:"above"})}));function Fi(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}var Ai=t(30006);var Wi=t(98852),Oi=t(60341);var Ui=t(49061),Zi=t(6421),Ki=t(50631);const Qi=(0,s.memo)((()=>{const e=(0,s.useRef)(null),{item:i,context:t}=(0,c.L)()??{},l=640,u=(0,n.NC)(U.Ln9),d=(0,s.useMemo)((()=>(0,Pe.h)(i?.images??void 0,{desiredSize:l})),[i?.images,l]),m=(0,Wi.z)(d,fe),g=(0,n.NC)(U.a4n);((e,i)=>{const t=(0,Oi.o)((e=>e?.nextItems?.[0]),((e,i)=>e?.uri===i?.uri)),l=(0,s.useMemo)((()=>(0,Pe.h)(t?.images??void 0,{desiredSize:e})),[t?.images,e]);(0,Wi.z)(l,i)})(l,fe);const{spec:h,logger:x}=(0,K.r)(r.w,{});(({spec:e,logger:i})=>{const t=(0,Le.ox)(),l=(0,s.useRef)(null);null===l.current&&(l.current=Fi(t)),(0,Ai.s)((()=>{const s=Fi(t);null!==s&&null!==l.current&&(i.logInteraction(e.dragUiResize2d({startWidthPx:l.current.width,startHeightPx:l.current.height,endWidthPx:s.width,endHeightPx:s.height})),l.current=s)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:x,spec:h}),(({spec:e,logger:i,pipWindow:t})=>{(0,s.useEffect)((()=>{if(!t)return;const s=s=>{if(s.currentTarget===t){const t=e.windowControlsFactory().closeButtonFactory().hitUiHide();i.logInteraction(t)}};return t.addEventListener("pagehide",s),()=>{t.removeEventListener("pagehide",s)}}),[i,t,e])})({logger:x,spec:h,pipWindow:window.documentPictureInPicture?.window??null});const{setVideoPlayerUIFlag:p}=(0,xi.d)(),[k,v]=(0,s.useState)("");(0,s.useLayoutEffect)((()=>{v(Ee)}),[]);const C=function(){const e=(0,Le.ox)(),[i,t]=(0,s.useState)(!1);return(0,Ai.s)((()=>{const i=Fi(e);null!==i&&(i.width<=300&&i.height<=300?t(!0):t(!1))}),{throttleTime:500,leading:!1,trailing:!0}),i}();(0,s.useEffect)((()=>{g&&p(pi.n.documentPip,!0)}),[g,p]);const{enqueueSnackbar:N}=(0,Zi.d)(),j=(0,s.useCallback)((e=>{var i;(i=e.target)&&"object"==typeof i&&"nodeName"in i&&"A"===i.nodeName&&"_blank"!==e.target.target&&(te()?se():N(o.Ru.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")))}),[N]);((e,i)=>{const t=(0,Le.ox)(),l=i??t;(0,s.useEffect)((()=>{e&&l&&(l.document.title=e)}),[e,l])})(o.Ru.get("web-player.pip-mini-player.window-title"));const f=(0,s.useRef)(null),S=(0,n.NC)(U.HYy),b=(0,Ki.t)(h,S),[y,B]=(0,s.useState)(!1),[w,L]=(0,s.useState)(!1),R=(0,s.useRef)(null),P=(0,s.useRef)(null),M=(0,s.useCallback)((()=>{B(!0),R.current&&clearTimeout(R.current),R.current=setTimeout((()=>{B(!1);const e=ye(f.current,"--mouse-active-over-controls-fadeout-timeout",300,"ms");P.current&&clearTimeout(P.current),P.current=setTimeout((()=>{P.current=null}),e)}),1e3)}),[]),E=(0,s.useCallback)((()=>{P.current||B(!1)}),[]),D=(0,s.useCallback)((()=>{L(!0)}),[]),T=(0,s.useCallback)((()=>{L(!1)}),[]);if(!i||!t)return null;const I=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(i),V=(0,Z.N)(i),z={"--background-color":m,"--background-image-url":`url(${d})`,"--background-image-width":"640px","--background-image-height":"640px","--player-controls-max-width":V?"140px":"260px",display:"var(--mini-player-display)"};return!u&&!V&&C?(0,F.jsx)(pe,{}):(0,F.jsx)(Ui.n,{domRootRef:e,children:(0,F.jsxs)("div",{ref:f,className:a()("encore-dark-theme","encore-small-devices-theme",Me),style:{"--mini-player-display":"none","--mini-player-drag-display":"none"},children:[(0,F.jsx)(ji,{}),(0,F.jsxs)("div",{className:a()(Fe,Ae),style:z,ref:b,children:[(0,F.jsx)("div",{className:a()(We,{[Oe]:!I}),"data-testid":"pip-hover-element",children:(0,F.jsx)("div",{className:Ue,id:"document-pip-main-container",children:(0,F.jsx)(ui,{})})}),(0,F.jsx)($,{item:i,className:ei,onClick:j}),(0,F.jsxs)("div",{className:a()("encore-over-media-set",Ye,{[$e]:y||w,[Xe]:(0,Z.N)(i)}),dir:"ltr","data-testid":Ce,onMouseEnter:M,onMouseMove:M,onMouseLeave:E,children:[(0,F.jsx)("div",{className:a()(qe),dir:"ltr",children:(0,F.jsx)(Vi,{item:i,spec:h,logger:x})}),(0,F.jsx)("div",{className:a()(Ge),dir:"ltr",children:(0,F.jsx)(_i,{item:i,spec:h,logger:x,onDragEnd:T,onDragStart:D})})]})]}),(0,F.jsx)("div",{className:k,children:(0,F.jsx)(fi.B,{fadeIn:!1})}),(0,F.jsx)("div",{ref:e,className:_e})]})})}))}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map